---
title: 'HTTP, Protocols & Security ‚Äî –∏–∑–º–µ–Ω–µ–Ω–∏—è 2023 –≥–æ–¥–∞'
description:
    '–ö–æ–º–ø–ª–µ–∫—Å–Ω—ã–π –æ–±–∑–æ—Ä –∏–∑–º–µ–Ω–µ–Ω–∏–π –≤ HTTP, —Å–µ—Ç–µ–≤—ã—Ö –ø—Ä–æ—Ç–æ–∫–æ–ª–∞—Ö –∏ –≤–µ–±-–±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ –∑–∞ 2023 –≥–æ–¥ - HTTP/3,
    Privacy Sandbox, CHIPS, WebAuthn, Private Network Access –∏ –ø—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–µ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏'
outline: deep
lastUpdated: true
---

# HTTP, Protocols & Security ‚Äî –∏–∑–º–µ–Ω–µ–Ω–∏—è 2023 –≥–æ–¥–∞

- **–ü–µ—Ä–∏–æ–¥**: 1 —è–Ω–≤–∞—Ä—è 2023 ‚Äî 31 –¥–µ–∫–∞–±—Ä—è 2023
- **–í–µ—Ä—Å–∏–∏ –±—Ä–∞—É–∑–µ—Ä–æ–≤**: Chrome/Edge 109‚Äì120, Firefox 109‚Äì120, Safari 16.3‚Äì17.2

## –û–±–∑–æ—Ä –≥–æ–¥–∞

2023 –≥–æ–¥ —Å—Ç–∞–ª –ø–µ—Ä–µ–ª–æ–º–Ω—ã–º –¥–ª—è –≤–µ–±-–±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ –∏ —Å–µ—Ç–µ–≤—ã—Ö –ø—Ä–æ—Ç–æ–∫–æ–ª–æ–≤. –ò–Ω–¥—É—Å—Ç—Ä–∏—è –∞–∫—Ç–∏–≤–Ω–æ –¥–≤–∏–≥–∞–ª–∞—Å—å –≤
—Å—Ç–æ—Ä–æ–Ω—É –ø—Ä–∏–≤–∞—Ç–Ω–æ—Å—Ç–∏, –ø–∞—Ä—Ç–∏—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ —Ö—Ä–∞–Ω–µ–Ω–∏—è –∏ –Ω–æ–≤—ã—Ö –ø—Ä–æ—Ç–æ–∫–æ–ª–æ–≤ –ø–µ—Ä–µ–¥–∞—á–∏ –¥–∞–Ω–Ω—ã—Ö. –ö–ª—é—á–µ–≤—ã–µ —Ç–µ–º—ã
–≥–æ–¥–∞:

- **Privacy-first**: –∑–∞–ø—É—Å–∫ Privacy Sandbox APIs (Chrome 115), –ø–∞—Ä—Ç–∏—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ cookies (CHIPS)
- **HTTP/3 adoption**: —Ä–æ—Å—Ç —Å 37% –¥–æ 40% —Ç—Ä–∞—Ñ–∏–∫–∞, –ø–æ–¥–¥–µ—Ä–∂–∫–∞ –≤ Firefox 114
- **WebAuthn Level 3**: –º–∞—Å—Å–æ–≤–æ–µ –≤–Ω–µ–¥—Ä–µ–Ω–∏–µ passkeys —á–µ—Ä–µ–∑ Conditional UI
- **Deprecations**: `document.domain` (Chrome 115), Web SQL (Chrome 119)
- **Private Network Access**: –∑–∞—â–∏—Ç–∞ –ª–æ–∫–∞–ª—å–Ω—ã—Ö —Å–µ—Ç–µ–π –æ—Ç –≤–µ–±-–∞—Ç–∞–∫ (Chrome 117)
- **Baseline-–¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è**: Fetch Metadata, Import Maps, Modulepreload

### –í–∑–∞–∏–º–æ—Å–≤—è–∑—å HTTP –∏ Security

HTTP-–ø—Ä–æ—Ç–æ–∫–æ–ª—ã –∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –Ω–µ—Ä–∞–∑—Ä—ã–≤–Ω–æ —Å–≤—è–∑–∞–Ω—ã –≤ —Å–æ–≤—Ä–µ–º–µ–Ω–Ω–æ–º –≤–µ–±–µ:

- **Security headers** (CSP, COEP, COOP) –ø–µ—Ä–µ–¥–∞—é—Ç—Å—è —á–µ—Ä–µ–∑ HTTP
- **CORS, CORP, Private Network Access** ‚Äî —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è HTTP-–ø—Ä–æ—Ç–æ–∫–æ–ª–∞
- **Cookies** ‚Äî –æ—Å–Ω–æ–≤–Ω–æ–π –º–µ—Ö–∞–Ω–∏–∑–º HTTP –¥–ª—è state management –∏ target –¥–ª—è privacy improvements
- **HTTP/3 –∏ QUIC** –≤–∫–ª—é—á–∞—é—Ç TLS 1.3 –Ω–∞ —É—Ä–æ–≤–Ω–µ –ø—Ä–æ—Ç–æ–∫–æ–ª–∞

–≠—Ç–æ—Ç –æ—Ç—á—ë—Ç –æ–±—ä–µ–¥–∏–Ω—è–µ—Ç –æ–±–µ –æ–±–ª–∞—Å—Ç–∏ –¥–ª—è —Ü–µ–ª–æ—Å—Ç–Ω–æ–≥–æ –ø–æ–Ω–∏–º–∞–Ω–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π 2023 –≥–æ–¥–∞.

## –ß–∞—Å—Ç—å 1: HTTP –∏ —Å–µ—Ç–µ–≤—ã–µ –ø—Ä–æ—Ç–æ–∫–æ–ª—ã

### 1. HTTP/3 ‚Äî —Å—Ç–∞—Ç—É—Å –∏ –∞–¥–∞–ø—Ç–∞—Ü–∏—è

**HTTP/3** –±–∞–∑–∏—Ä—É–µ—Ç—Å—è –Ω–∞ –ø—Ä–æ—Ç–æ–∫–æ–ª–µ QUIC (UDP –≤–º–µ—Å—Ç–æ TCP) –∏ –≤–∫–ª—é—á–∞–µ—Ç –≤—Å—Ç—Ä–æ–µ–Ω–Ω—É—é –ø–æ–¥–¥–µ—Ä–∂–∫—É TLS 1.3.

#### 1.1 –°—Ç–∞—Ç—É—Å –±—Ä–∞—É–∑–µ—Ä–Ω–æ–π –ø–æ–¥–¥–µ—Ä–∂–∫–∏

**Chrome/Edge**:

- –ü–æ–ª–Ω–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞ —Å Chrome 87 (–Ω–æ—è–±—Ä—å 2020)
- Chrome 109-120 (–≤–µ—Å—å 2023): HTTP/3 –≤–∫–ª—é—á—ë–Ω –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
- –°–æ—Å—Ç–∞–≤–ª—è–ª ~80% HTTP/3 —Ç—Ä–∞—Ñ–∏–∫–∞ –≤ –Ω–∞—á–∞–ª–µ 2023, —Å–Ω–∏–∑–∏–ª—Å—è –¥–æ ~74% –∫ –º–∞—é –∏–∑-–∑–∞ —Ä–æ—Å—Ç–∞ Safari

**Firefox**:

- –ü–æ–ª–Ω–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞ —Å –≤–µ—Ä—Å–∏–∏ 88 (–∞–ø—Ä–µ–ª—å 2021)
- Firefox 109-120 (–≤–µ—Å—å 2023): HTTP/3 –≤–∫–ª—é—á—ë–Ω –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
- –°—Ç–∞–±–∏–ª—å–Ω–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞ –≤—Å–µ—Ö –≤–µ—Ä—Å–∏–π 2023 –≥–æ–¥–∞

**Safari**:

- –≠–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–∞–ª—å–Ω–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞ –¥–æ 2023
- –ú–µ–Ω–µ–µ 1% HTTP/3 —Ç—Ä–∞—Ñ–∏–∫–∞ –¥–æ –º–∞—è 2023
- –í—ã—Ä–æ—Å –¥–æ ~7% –∫ –º–∞—é 2023 –±–ª–∞–≥–æ–¥–∞—Ä—è –ø–µ—Ä–µ—Ö–æ–¥—É –≤ production-—Å—Ç–∞—Ç—É—Å
- –ü–æ–ª–Ω–∞—è production-–ø–æ–¥–¥–µ—Ä–∂–∫–∞ –≤ Safari 16+ (–ø—Ä–æ—Ü–µ—Å—Å –Ω–∞—á–∞–ª—Å—è –≤ 2023)

#### 1.2 –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∞–¥–∞–ø—Ç–∞—Ü–∏–∏

–ü–æ –¥–∞–Ω–Ω—ã–º Cloudflare:

- HTTP/3 —Ç—Ä–∞—Ñ–∏–∫ –≤—ã—Ä–æ—Å —Å 37% –¥–æ 45% –≤ –Ω–∞—á–∞–ª–µ 2023
- –°–Ω–∏–∂–µ–Ω–∏–µ –¥–æ ~40% –≤ —Å–µ—Ä–µ–¥–∏–Ω–µ —Å–µ–Ω—Ç—è–±—Ä—è 2023
- –ö –∫–æ–Ω—Ü—É 2023: **~40% —Ç—Ä–∞—Ñ–∏–∫–∞ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç HTTP/3**
- **94% –æ—Ç—Å–ª–µ–∂–∏–≤–∞–µ–º—ã—Ö –±—Ä–∞—É–∑–µ—Ä–æ–≤** –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç HTTP/3
- **26% –∏–∑ —Ç–æ–ø-10 –º–∏–ª–ª–∏–æ–Ω–æ–≤ —Å–∞–π—Ç–æ–≤** –∏—Å–ø–æ–ª—å–∑—É—é—Ç HTTP/3

#### 1.3 –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –ø—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞

- ‚úÖ **0-RTT / 1-RTT connection establishment** ‚Äî –±—ã—Å—Ç—Ä–æ–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è
- ‚úÖ **Multiplexing –±–µ–∑ head-of-line blocking** ‚Äî —É—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º—ã HTTP/2
- ‚úÖ **–£–ª—É—á—à–µ–Ω–Ω–∞—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –ø—Ä–∏ –ø–ª–æ—Ö–æ–º –∫–∞—á–µ—Å—Ç–≤–µ —Å–µ—Ç–∏**
- ‚úÖ **Connection migration** ‚Äî —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è –ø—Ä–∏ —Å–º–µ–Ω–µ —Å–µ—Ç–∏ (Wi-Fi ‚Üí –º–æ–±–∏–ª—å–Ω–∞—è —Å–µ—Ç—å)
- ‚úÖ **–í—Å—Ç—Ä–æ–µ–Ω–Ω–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞ TLS 1.3**

**–ò—Å—Ç–æ—á–Ω–∏–∫–∏**:

- https://blog.cloudflare.com/http3-usage-one-year-on/
- https://caniuse.com/http3
- https://nitewall.com/2024/09/browser-support-for-http-3-an-overview/

### 2. HTTP Headers ‚Äî –Ω–æ–≤—ã–µ –∏ –æ–±–Ω–æ–≤–ª—ë–Ω–Ω—ã–µ –∑–∞–≥–æ–ª–æ–≤–∫–∏

HTTP –∑–∞–≥–æ–ª–æ–≤–∫–∏ ‚Äî –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–π –º–µ—Ö–∞–Ω–∏–∑–º –¥–ª—è –∫–æ–Ω—Ç—Ä–æ–ª—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏, –ø—Ä–∏–≤–∞—Ç–Ω–æ—Å—Ç–∏ –∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
–≤–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π.

#### 2.1 Security Headers

##### 2.1.1 Permissions-Policy

**–°—Ç–∞—Ç—É—Å 2023**:

- Chrome/Edge: –ø–æ–ª–Ω–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞ —Å –≤–µ—Ä—Å–∏–∏ 88 (—è–Ω–≤–∞—Ä—å 2021)
- Firefox: –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è (–≤–µ—Å—å 2023)
- Safari: –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è (–≤–µ—Å—å 2023)

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**:

- –ó–∞–º–µ–Ω–∞ —É—Å—Ç–∞—Ä–µ–≤—à–µ–≥–æ `Feature-Policy`
- –ö–æ–Ω—Ç—Ä–æ–ª—å –¥–æ—Å—Ç—É–ø–∞ –∫ "–º–æ—â–Ω—ã–º" –≤–µ–±-—Ñ—É–Ω–∫—Ü–∏—è–º (–≥–µ–æ–ª–æ–∫–∞—Ü–∏—è, –∫–∞–º–µ—Ä–∞, –º–∏–∫—Ä–æ—Ñ–æ–Ω)
- –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–µ–π –¥–ª—è embedded –∫–æ–Ω—Ç–µ–Ω—Ç–∞

**–ü—Ä–∏–º–µ—Ä –ø–æ–ª–∏—Ç–∏–∫–∏**:

```http
Permissions-Policy: geolocation=(self),
                    microphone=(),
                    camera=(self "https://trusted.example.com"),
                    payment=(self),
                    usb=()
```

**–ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–æ–µ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ**:

```http
# –ó–∞–ø—Ä–µ—Ç–∏—Ç—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –∫–∞–º–µ—Ä—ã –∏ –º–∏–∫—Ä–æ—Ñ–æ–Ω–∞ –¥–ª—è –≤—Å–µ—Ö iframe
Permissions-Policy: camera=(), microphone=()

# –†–∞–∑—Ä–µ—à–∏—Ç—å –≥–µ–æ–ª–æ–∫–∞—Ü–∏—é —Ç–æ–ª—å–∫–æ –¥–ª—è —Ç–µ–∫—É—â–µ–≥–æ origin
Permissions-Policy: geolocation=(self)

# –†–∞–∑—Ä–µ—à–∏—Ç—å fullscreen –¥–ª—è —Ç–µ–∫—É—â–µ–≥–æ origin –∏ –¥–æ–≤–µ—Ä–µ–Ω–Ω–æ–≥–æ CDN
Permissions-Policy: fullscreen=(self "https://cdn.example.com")
```

**Browser Compatibility Score**: 38/100 (—Ç–æ–ª—å–∫–æ Chrome/Edge)

**–ò—Å—Ç–æ—á–Ω–∏–∫–∏**:

- https://developer.chrome.com/docs/privacy-security/permissions-policy
- https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Permissions-Policy
- https://caniuse.com/permissions-policy

##### 2.1.2 Fetch Metadata Headers

**–°—Ç–∞—Ç—É—Å 2023**:

- Chrome: —Å –≤–µ—Ä—Å–∏–∏ 80 (—Ñ–µ–≤—Ä–∞–ª—å 2020)
- Edge: —Å –≤–µ—Ä—Å–∏–∏ 80 (—Ñ–µ–≤—Ä–∞–ª—å 2020)
- Firefox: —Å –≤–µ—Ä—Å–∏–∏ 90 (–∏—é–ª—å 2021)
- **Safari 16.4: –¥–æ–±–∞–≤–ª–µ–Ω–∞ –ø–æ–¥–¥–µ—Ä–∂–∫–∞ (–º–∞—Ä—Ç 2023)** ‚≠ê

**–ö–ª—é—á–µ–≤–∞—è –≤–µ—Ö–∞ 2023**: Safari 16.4 (27 –º–∞—Ä—Ç–∞ 2023) –¥–æ–±–∞–≤–∏–ª –ø–æ–¥–¥–µ—Ä–∂–∫—É Fetch Metadata Request
Headers, –¥–æ—Å—Ç–∏–≥–Ω—É–≤ –∫—Ä–æ—Å—Å–±—Ä–∞—É–∑–µ—Ä–Ω–æ–π —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏.

**Baseline Status**: **Newly Available (–º–∞—Ä—Ç 2023)**

**Headers**:

- `Sec-Fetch-Site`: –∫–æ–Ω—Ç–µ–∫—Å—Ç –∑–∞–ø—Ä–æ—Å–∞ (`cross-site`, `same-origin`, `same-site`, `none`)
- `Sec-Fetch-Mode`: —Ä–µ–∂–∏–º –∑–∞–ø—Ä–æ—Å–∞ (`cors`, `no-cors`, `navigate`, `websocket`)
- `Sec-Fetch-Dest`: –Ω–∞–∑–Ω–∞—á–µ–Ω–∏–µ —Ä–µ—Å—É—Ä—Å–∞ (`document`, `image`, `script`, `style`, `font`, –∏ —Ç.–¥.)
- `Sec-Fetch-User`: –∏–Ω–∏—Ü–∏–∏—Ä–æ–≤–∞–Ω –ª–∏ –∑–∞–ø—Ä–æ—Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º (`?1` –∏–ª–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç)

**–ü—Ä–∏–º–µ—Ä request headers**:

```http
GET /api/sensitive-data HTTP/1.1
Host: api.example.com
Sec-Fetch-Site: cross-site
Sec-Fetch-Mode: cors
Sec-Fetch-Dest: empty
Sec-Fetch-User: ?1
Origin: https://app.example.com
```

**Server-side –∑–∞—â–∏—Ç–∞ (Resource Isolation Policy)**:

```javascript
// Node.js/Express middleware
function resourceIsolationPolicy(req, res, next) {
    const site = req.headers['sec-fetch-site'];
    const mode = req.headers['sec-fetch-mode'];
    const dest = req.headers['sec-fetch-dest'];

    // –ù–µ –≤—Å–µ –±—Ä–∞—É–∑–µ—Ä—ã –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç Fetch Metadata
    if (!site) {
        return next(); // Fallback: —Ä–∞–∑—Ä–µ—à–∏—Ç—å
    }

    // –†–∞–∑—Ä–µ—à–∏—Ç—å browser-initiated navigation
    if (mode === 'navigate' && dest === 'document') {
        return next();
    }

    // –†–∞–∑—Ä–µ—à–∏—Ç—å same-origin –∏ same-site
    if (site === 'same-origin' || site === 'same-site') {
        return next();
    }

    // –†–∞–∑—Ä–µ—à–∏—Ç—å CORS requests –æ—Ç –¥–æ–≤–µ—Ä–µ–Ω–Ω—ã—Ö origins
    const trustedOrigins = ['https://trusted-partner.com'];
    if (mode === 'cors' && trustedOrigins.includes(req.headers['origin'])) {
        return next();
    }

    // –ë–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å –≤—Å–µ –æ—Å—Ç–∞–ª—å–Ω—ã–µ cross-site requests
    return res.status(403).json({ error: 'Forbidden: cross-site request blocked' });
}

app.use('/api/*', resourceIsolationPolicy);
```

**–ó–∞—â–∏—Ç–∞ –æ—Ç –∞—Ç–∞–∫**:

- ‚úÖ **CSRF attacks** ‚Äî –±–ª–æ–∫–∏—Ä–æ–≤–∫–∞ cross-site requests
- ‚úÖ **Cross-site Script Inclusion (XSSI)** ‚Äî –∑–∞—â–∏—Ç–∞ JSON endpoints
- ‚úÖ **Timing attacks** ‚Äî –∫–æ–Ω—Ç—Ä–æ–ª—å –¥–æ—Å—Ç—É–ø–∞ –Ω–∞ –æ—Å–Ω–æ–≤–µ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞
- ‚úÖ **XS-Leaks** ‚Äî –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏–µ —É—Ç–µ—á–∫–∏ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏

**–ò—Å—Ç–æ—á–Ω–∏–∫–∏**:

- https://web.dev/articles/fetch-metadata
- https://www.w3.org/TR/fetch-metadata/
- https://web-platform-dx.github.io/web-features-explorer/features/fetch-metadata/
- https://developer.apple.com/documentation/safari-release-notes/safari-16_4-release-notes

##### 2.1.3 Private Network Access (PNA) Headers

**–°—Ç–∞—Ç—É—Å 2023**:

- **Chrome 114 (–º–∞–π 2023)**: deprecation phase –Ω–∞—á–∞—Ç–∞ ‚≠ê
- **Chrome 117 (—Å–µ–Ω—Ç—è–±—Ä—å 2023)**: deprecation trial –∑–∞–≤–µ—Ä—à—ë–Ω ‚≠ê
- Firefox: –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è –≤ 2023
- Safari: –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è –≤ 2023

**Timeline 2023**:

- 19 —è–Ω–≤–∞—Ä—è 2023: –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ timeline, deprecation –æ—Ç–ª–æ–∂–µ–Ω –¥–æ Chrome 114
- –ú–∞–π 2023: Chrome 114 –Ω–∞—á–∞–ª warning phase
- –°–µ–Ω—Ç—è–±—Ä—å 2023: Chrome 117 –∑–∞–≤–µ—Ä—à–∏–ª deprecation trial

**–ù–æ–≤—ã–µ Headers**:

Request (preflight):

```http
Access-Control-Request-Private-Network: true
```

Response:

```http
Access-Control-Allow-Private-Network: true
```

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**:

- –ó–∞—â–∏—Ç–∞ –æ—Ç CSRF –∞—Ç–∞–∫ –Ω–∞ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ –≤ –ø—Ä–∏–≤–∞—Ç–Ω—ã—Ö —Å–µ—Ç—è—Ö (—Ä–æ—É—Ç–µ—Ä—ã, IoT, –ø—Ä–∏–Ω—Ç–µ—Ä—ã)
- Preflight requests –¥–ª—è –≤—Å–µ—Ö private network requests
- –ü—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è –¥–∞–∂–µ –¥–ª—è same-origin requests, –µ—Å–ª–∏ target IP –±–æ–ª–µ–µ –ø—Ä–∏–≤–∞—Ç–Ω—ã–π

**–û—Ç–ª–∏—á–∏—è –æ—Ç –æ–±—ã—á–Ω–æ–≥–æ CORS**:

- Preflight –¥–ª—è –≤—Å–µ—Ö —Ä–µ–∂–∏–º–æ–≤ (`cors`, `no-cors`, –∏ —Ç.–¥.)
- Preflight –¥–ª—è same-origin, –µ—Å–ª–∏ –∞–¥—Ä–µ—Å–∞—Ç –±–æ–ª–µ–µ –ø—Ä–∏–≤–∞—Ç–µ–Ω
- –ù–æ–≤—ã–π header `Access-Control-Request-Private-Network`

**–ü—Ä–∏–º–µ—Ä Server Response**:

```javascript
// Express.js middleware
app.use((req, res, next) => {
    // –ü—Ä–æ–≤–µ—Ä–∫–∞ private network request
    if (req.headers['access-control-request-private-network'] === 'true') {
        // –†–∞–∑—Ä–µ—à–∏—Ç—å –¥–æ—Å—Ç—É–ø –∏–∑ –ø—É–±–ª–∏—á–Ω–æ–≥–æ –≤–µ–±–∞ –∫ –ª–æ–∫–∞–ª—å–Ω–æ–º—É —É—Å—Ç—Ä–æ–π—Å—Ç–≤—É
        res.setHeader('Access-Control-Allow-Private-Network', 'true');
        res.setHeader('Access-Control-Allow-Origin', 'https://app.example.com');
        res.setHeader('Access-Control-Allow-Methods', 'GET, POST');
    }
    next();
});
```

**Security implications**:

–ö—Ä–∏—Ç–∏—á–µ—Å–∫–æ–µ —É–ª—É—á—à–µ–Ω–∏–µ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏, –∑–∞—â–∏—â–∞—é—â–µ–µ –¥–æ–º–∞—à–Ω–∏–µ –∏ –∫–æ—Ä–ø–æ—Ä–∞—Ç–∏–≤–Ω—ã–µ —Å–µ—Ç–∏ –æ—Ç –∞—Ç–∞–∫ —á–µ—Ä–µ–∑ –ø—É–±–ª–∏—á–Ω—ã–µ
–≤–µ–±-—Å–∞–π—Ç—ã. –ë–µ–∑ PNA, –≤—Ä–µ–¥–æ–Ω–æ—Å–Ω—ã–π —Å–∞–π—Ç –º–æ–≥ –∞—Ç–∞–∫–æ–≤–∞—Ç—å —Ä–æ—É—Ç–µ—Ä –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –Ω–∞ `192.168.1.1`.

**–ò—Å—Ç–æ—á–Ω–∏–∫–∏**:

- https://developer.chrome.com/blog/private-network-access-preflight
- https://developer.chrome.com/blog/private-network-access-update

#### 2.2 Privacy Headers

##### 2.2.1 Client Hints (Sec-CH-\*)

**–°—Ç–∞—Ç—É—Å 2023**:

- Chrome: –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é —Å –≤–µ—Ä—Å–∏–∏ 89 (–º–∞—Ä—Ç 2021)
- **Chrome 110 (—Ñ–µ–≤—Ä–∞–ª—å 2023)**: —Ñ–∏–Ω–∞–ª—å–Ω–∞—è —Ñ–∞–∑–∞ –∏–∑–º–µ–Ω–µ–Ω–∏–π User-Agent ‚≠ê
- Firefox: –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è (–≤–µ—Å—å 2023)
- Safari: –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è (–≤–µ—Å—å 2023)

**–ö–ª—é—á–µ–≤–∞—è –≤–µ—Ö–∞ —Ñ–µ–≤—Ä–∞–ª—è 2023**: Chrome 110 –∑–∞–≤–µ—Ä—à–∏–ª –ø–æ—Å—Ç–µ–ø–µ–Ω–Ω–æ–µ —Å–æ–∫—Ä–∞—â–µ–Ω–∏–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –≤ User-Agent
string, —É—Å–∏–ª–∏–≤–∞—è –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è Client Hints –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –¥–µ—Ç–∞–ª—å–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ
–±—Ä–∞—É–∑–µ—Ä–µ –∏ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–µ.

**Default Headers (Low Entropy)**:

–ë—Ä–∞—É–∑–µ—Ä –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç:

```http
Sec-CH-UA: "Chromium";v="110", "Not A(Brand";v="99", "Google Chrome";v="110"
Sec-CH-UA-Mobile: ?0
Sec-CH-UA-Platform: "macOS"
```

**High Entropy Hints** (—Ç—Ä–µ–±—É—é—Ç `Accept-CH` header):

- `Sec-CH-UA-Full-Version` ‚Äî –ø–æ–ª–Ω–∞—è –≤–µ—Ä—Å–∏—è –±—Ä–∞—É–∑–µ—Ä–∞
- `Sec-CH-UA-Platform-Version` ‚Äî –≤–µ—Ä—Å–∏—è –û–°
- `Sec-CH-UA-Arch` ‚Äî –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä–∞
- `Sec-CH-UA-Model` ‚Äî –º–æ–¥–µ–ª—å —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ (–º–æ–±–∏–ª—å–Ω—ã–µ)
- `Sec-CH-UA-Bitness` ‚Äî —Ä–∞–∑—Ä—è–¥–Ω–æ—Å—Ç—å (32/64 bit)

**Server Request for High Entropy**:

```http
HTTP/1.1 200 OK
Accept-CH: Sec-CH-UA-Full-Version, Sec-CH-UA-Platform-Version
```

**Client Response –Ω–∞ —Å–ª–µ–¥—É—é—â–µ–º –∑–∞–ø—Ä–æ—Å–µ**:

```http
GET /api/analytics HTTP/1.1
Sec-CH-UA: "Chromium";v="110", "Not A(Brand";v="99", "Google Chrome";v="110"
Sec-CH-UA-Mobile: ?0
Sec-CH-UA-Platform: "macOS"
Sec-CH-UA-Full-Version: "110.0.5481.77"
Sec-CH-UA-Platform-Version: "13.2.0"
```

**–ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–æ–µ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ**:

```javascript
// –°–µ—Ä–≤–µ—Ä–Ω–∞—è –ª–æ–≥–∏–∫–∞ –¥–ª—è adaptive content delivery
if (req.headers['sec-ch-ua-mobile'] === '?1') {
    // –ú–æ–±–∏–ª—å–Ω–æ–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ: –æ—Ç–ø—Ä–∞–≤–∏—Ç—å —É–ø—Ä–æ—â—ë–Ω–Ω—É—é –≤–µ—Ä—Å–∏—é
    res.render('mobile-version');
} else if (req.headers['sec-ch-ua-platform'] === '"Windows"') {
    // Windows: —Å–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã–µ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏
    res.render('windows-optimized');
}
```

**–¢—Ä–µ–±–æ–≤–∞–Ω–∏—è**:

- ‚úÖ –†–∞–±–æ—Ç–∞—é—Ç —Ç–æ–ª—å–∫–æ –ø–æ **HTTPS**
- ‚úÖ High entropy hints —Ç—Ä–µ–±—É—é—Ç —è–≤–Ω–æ–≥–æ –∑–∞–ø—Ä–æ—Å–∞ —á–µ—Ä–µ–∑ `Accept-CH`
- ‚úÖ Privacy-preserving: opt-in –º–æ–¥–µ–ª—å

**–ò—Å—Ç–æ—á–Ω–∏–∫–∏**:

- https://developer.chrome.com/articles/user-agent-client-hints/
- https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Sec-CH-UA
- https://notifiare.com/blog/2023/11/17/privacy-preserving-browser-detection/

##### 2.2.2 CHIPS ‚Äî Cookies Having Independent Partitioned State

**–°—Ç–∞—Ç—É—Å 2023**:

- **Chrome 109 (—è–Ω–≤–∞—Ä—å 2023)**: origin trial –Ω–∞—á–∞–ª—Å—è ‚≠ê
- **Chrome 114 (–º–∞–π 2023)**: –ø–æ–¥–¥–µ—Ä–∂–∫–∞ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é ‚≠ê
- –ü–æ—Å—Ç–µ–ø–µ–Ω–Ω—ã–π rollout —Å 10 —è–Ω–≤–∞—Ä—è 2023
- Firefox: –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è –≤ 2023
- Safari: –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è –≤ 2023 (–Ω–æ –µ—Å—Ç—å —Å–æ–±—Å—Ç–≤–µ–Ω–Ω–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è —á–µ—Ä–µ–∑ ITP)

**–ù–æ–≤—ã–π Cookie Attribute**:

```http
Set-Cookie: __Host-session=abc123; Secure; Path=/; SameSite=None; Partitioned
```

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**:

- Opt-in partitioned storage –¥–ª—è cross-site cookies
- –û—Ç–¥–µ–ª—å–Ω—ã–µ "cookie jars" –¥–ª—è –∫–∞–∂–¥–æ–≥–æ top-level site
- –£–ª—É—á—à–µ–Ω–Ω–∞—è –ø—Ä–∏–≤–∞—Ç–Ω–æ—Å—Ç—å –ø—Ä–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–∏ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏ –¥–ª—è legitimate use cases

**–¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è**:

- ‚úÖ –î–æ–ª–∂–µ–Ω –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è —Å –∞—Ç—Ä–∏–±—É—Ç–æ–º `Secure`
- ‚úÖ –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `__Host-` prefix
- ‚ö†Ô∏è Limit: –º–∞–∫—Å–∏–º—É–º 180 cookies –Ω–∞ partition
- ‚ö†Ô∏è –ú–∞–∫—Å–∏–º—É–º 10 KB –Ω–∞ embedded-site

**–ü—Ä–∏–º–µ—Ä Use Case ‚Äî Embedded Payment Provider**:

```javascript
// Payment provider –≤—Å—Ç—Ä–æ–µ–Ω –Ω–∞ https://shop-a.example
// Payment provider domain: payment-provider.example

// Server response (payment-provider.example)
Set-Cookie: __Host-payment-session=abc123;
            Secure;
            Path=/;
            SameSite=None;
            Partitioned;
            Max-Age=3600

// –ù–∞ https://shop-b.example —Ç–æ—Ç –∂–µ payment provider –ø–æ–ª—É—á–∏—Ç
// –î–†–£–ì–û–ô cookie jar (–∏–∑–æ–ª–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –æ—Ç shop-a.example)
```

**Diagram:**

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  Top-level site: shop-a.example         ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê   ‚îÇ
‚îÇ  ‚îÇ Embedded: payment-provider.com   ‚îÇ   ‚îÇ
‚îÇ  ‚îÇ Cookie: session=ABC (partition A)‚îÇ   ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò   ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò

‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  Top-level site: shop-b.example         ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê   ‚îÇ
‚îÇ  ‚îÇ Embedded: payment-provider.com   ‚îÇ   ‚îÇ
‚îÇ  ‚îÇ Cookie: session=XYZ (partition B)‚îÇ   ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò   ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

**Security implications**:

CHIPS ‚Äî —á–∞—Å—Ç—å Privacy Sandbox –∏–Ω–∏—Ü–∏–∞—Ç–∏–≤—ã, –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–Ω–æ–π –Ω–∞ –æ—Ç–∫–∞–∑ –æ—Ç third-party cookies –ø—Ä–∏
—Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏. Partitioned cookies –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞—é—Ç cross-site tracking, —Ç–∞–∫
–∫–∞–∫ –∫–∞–∂–¥—ã–π top-level site –∏–º–µ–µ—Ç —Å–≤–æ–π –∏–∑–æ–ª–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –Ω–∞–±–æ—Ä cookies –¥–ª—è embedded content.

**–ò—Å—Ç–æ—á–Ω–∏–∫–∏**:

- https://developer.chrome.com/docs/privacy-sandbox/chips/
- https://privacysandbox.google.com/cookies/chips
- https://developer.mozilla.org/en-US/docs/Web/Privacy/Guides/Privacy_sandbox/Partitioned_cookies

#### 2.3 Cross-Origin Isolation Headers

##### 2.3.1 COEP, COOP, CORP

**–°—Ç–∞—Ç—É—Å 2023**:

- Chrome: COEP —Å –≤–µ—Ä—Å–∏–∏ 83, COOP —Å –≤–µ—Ä—Å–∏–∏ 83, CORP —Ä–∞–Ω–µ–µ
- **Chrome 96+: COEP: credentialless** ‚≠ê
- Firefox: —Å –≤–µ—Ä—Å–∏–∏ 85 (—è–Ω–≤–∞—Ä—å 2021)
- Safari: –ø–æ–¥–¥–µ—Ä–∂–∫–∞ —Å 2021
- –®–∏—Ä–æ–∫–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞ –≤–æ –≤—Å–µ—Ö –±—Ä–∞—É–∑–µ—Ä–∞—Ö –≤ 2023

**Headers**:

```http
Cross-Origin-Embedder-Policy: require-corp
Cross-Origin-Opener-Policy: same-origin
Cross-Origin-Resource-Policy: same-origin
```

**COEP: credentialless (Chrome 96+, Firefox 119+)**:

```http
Cross-Origin-Embedder-Policy: credentialless
```

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**:

- –í–∫–ª—é—á–µ–Ω–∏–µ cross-origin isolation –¥–ª—è –∑–∞—â–∏—Ç—ã –æ—Ç Spectre
- –î–æ—Å—Ç—É–ø –∫ –º–æ—â–Ω—ã–º —Ñ—É–Ω–∫—Ü–∏—è–º: `SharedArrayBuffer`, `performance.measureUserAgentSpecificMemory()`
- High-resolution timers —Å –ª—É—á—à–µ–π —Ç–æ—á–Ω–æ—Å—Ç—å—é

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–æ credentialless**:

- ‚úÖ –ü–æ–∑–≤–æ–ª—è–µ—Ç –∑–∞–≥—Ä—É–∂–∞—Ç—å cross-origin —Ä–µ—Å—É—Ä—Å—ã –±–µ–∑ CORP
- ‚úÖ –ó–∞–ø—Ä–æ—Å—ã –æ—Ç–ø—Ä–∞–≤–ª—è—é—Ç—Å—è –±–µ–∑ credentials (cookies, auth)
- ‚úÖ –£–ø—Ä–æ—â–∞–µ—Ç –≤–Ω–µ–¥—Ä–µ–Ω–∏–µ cross-origin isolation

**–ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–π –ø—Ä–∏–º–µ—Ä**:

```html
<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8" />
        <title>Cross-Origin Isolated App</title>
    </head>
    <body>
        <h1>High-Precision Timers App</h1>
        <script>
            // –ü—Ä–æ–≤–µ—Ä–∫–∞ –∏–∑–æ–ª—è—Ü–∏–∏
            if (crossOriginIsolated) {
                console.log('‚úÖ Cross-origin isolated!');

                // SharedArrayBuffer –¥–æ—Å—Ç—É–ø–µ–Ω
                const buffer = new SharedArrayBuffer(1024);
                console.log('SharedArrayBuffer created:', buffer.byteLength);

                // High-resolution timers
                const start = performance.now();
                // ... expensive operation ...
                const end = performance.now();
                console.log('Elapsed time (microseconds):', end - start);
            } else {
                console.warn('‚ùå Not cross-origin isolated');
            }
        </script>
    </body>
</html>
```

**Server configuration (Node.js/Express)**:

```javascript
app.use((req, res, next) => {
    // –í–∞—Ä–∏–∞–Ω—Ç 1: require-corp (—Å—Ç—Ä–æ–≥–∏–π, —Ç—Ä–µ–±—É–µ—Ç CORP –Ω–∞ –≤—Å–µ—Ö —Ä–µ—Å—É—Ä—Å–∞—Ö)
    // res.setHeader('Cross-Origin-Embedder-Policy', 'require-corp');

    // –í–∞—Ä–∏–∞–Ω—Ç 2: credentialless (–º—è–≥–∫–∏–π, —Ä–µ—Å—É—Ä—Å—ã –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è –±–µ–∑ cookies)
    res.setHeader('Cross-Origin-Embedder-Policy', 'credentialless');

    res.setHeader('Cross-Origin-Opener-Policy', 'same-origin');
    next();
});
```

**–ò—Å—Ç–æ—á–Ω–∏–∫–∏**:

- https://web.dev/articles/coop-coep
- https://developer.chrome.com/blog/coep-credentialless-origin-trial
- https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Cross-Origin-Embedder-Policy

#### 2.4 Reporting Headers

##### 2.4.1 Reporting API v1 ‚Äî Reporting-Endpoints

**–°—Ç–∞—Ç—É—Å 2023**:

- **Chrome 96+ (2021, –ø—Ä–æ–¥–æ–ª–∂–∞–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è –≤ 2023)**: Reporting API v1
- –ó–∞–º–µ–Ω–∞ –¥–ª—è `Report-To` (v0)
- Firefox: –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è
- Safari: –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è

**Headers Comparison**:

**v0 (Report-To)**:

```http
Report-To: {"group":"endpoint-1","max_age":10886400,"endpoints":[{"url":"https://example.com/reports"}]}
```

**v1 (Reporting-Endpoints)**:

```http
Reporting-Endpoints: endpoint-1="https://example.com/reports",
                     csp-endpoint="https://example.com/csp-reports"
```

**–ö–ª—é—á–µ–≤—ã–µ –æ—Ç–ª–∏—á–∏—è**:

- `Reporting-Endpoints` —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è –Ω–∞ –∫–∞–∂–¥–æ–º response
- –ü—Ä–æ—â–µ —Å–∏–Ω—Ç–∞–∫—Å–∏—Å
- –ù–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç Network Error reports (–≤ –æ—Ç–ª–∏—á–∏–µ –æ—Ç v0)
- –ö—Ä–æ—Å—Å–±—Ä–∞—É–∑–µ—Ä–Ω–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞ –æ–∂–∏–¥–∞–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –¥–ª—è v1

**–ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ Report Types**:

- CSP violations
- COOP/COEP violations
- Deprecation reports
- Intervention reports
- Crash reports

**–ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–π –ø—Ä–∏–º–µ—Ä —Å CSP**:

```http
Reporting-Endpoints: csp="https://reports.example.com/csp"
Content-Security-Policy: default-src 'self'; script-src 'self'; report-to csp
```

**–ü—Ä–∏–º–µ—Ä –æ—Ç—á—ë—Ç–∞ (JSON payload)**:

```json
{
    "age": 420,
    "body": {
        "blockedURL": "https://evil.example.com/script.js",
        "disposition": "enforce",
        "documentURL": "https://example.com/",
        "effectiveDirective": "script-src-elem",
        "originalPolicy": "default-src 'self'; script-src 'self'; report-to csp",
        "statusCode": 200,
        "violatedDirective": "script-src-elem"
    },
    "type": "csp-violation",
    "url": "https://example.com/",
    "user_agent": "Mozilla/5.0..."
}
```

**Migration Strategy**:

```http
# –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –æ–±–µ–∏—Ö –≤–µ—Ä—Å–∏–π –¥–ª—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏
Report-To: {"group":"default","max_age":10886400,"endpoints":[{"url":"https://reports.example.com"}]}
Reporting-Endpoints: default="https://reports.example.com"
Content-Security-Policy: default-src 'self'; report-to default
```

**–ò—Å—Ç–æ—á–Ω–∏–∫–∏**:

- https://developer.chrome.com/articles/reporting-api/
- https://developer.chrome.com/blog/reporting-api-migration
- https://w3c.github.io/reporting/

### 3. Fetch API ‚Äî –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –∏ –Ω–æ–≤—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

#### 3.1 Fetch Priority / Priority Hints

**–°—Ç–∞—Ç—É—Å 2023**:

- **Chrome 102+ (–º–∞–π 2022, –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ 2023)**: –ø–æ–ª–Ω–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞
- **Edge 102+**: –ø–æ–ª–Ω–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞
- Firefox: –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è (–≤–µ—Å—å 2023)
- Safari: –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è (–≤–µ—Å—å 2023)

**API**:

```javascript
// Fetch with priority
fetch('/api/critical-data', {
    priority: 'high', // 'high', 'low', 'auto'
}).then((response) => response.json());

// Image with priority
const img = document.createElement('img');
img.src = 'hero.jpg';
img.fetchPriority = 'high'; // –¥–ª—è LCP –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
document.body.appendChild(img);
```

**HTML attributes**:

```html
<!-- Hero image –¥–ª—è LCP -->
<img src="hero.jpg" fetchpriority="high" alt="Hero" />

<!-- Below-the-fold –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è -->
<img src="gallery-1.jpg" fetchpriority="low" loading="lazy" />

<!-- Link preload —Å –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–æ–º -->
<link rel="preload" href="critical.js" as="script" fetchpriority="high" />
<link rel="preload" href="analytics.js" as="script" fetchpriority="low" />
```

**Use Cases**:

- ‚úÖ –ü—Ä–∏–æ—Ä–∏—Ç–∏–∑–∞—Ü–∏—è LCP –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π: `fetchpriority="high"`
- ‚úÖ –î–µ–ø—Ä–∏–æ—Ä–∏—Ç–∏–∑–∞—Ü–∏—è –Ω–µ–∫—Ä–∏—Ç–∏—á–Ω—ã—Ö —Ä–µ—Å—É—Ä—Å–æ–≤: `fetchpriority="low"`
- ‚úÖ –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è Core Web Vitals

**–ú–µ—Ç—Ä–∏–∫–∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏**:

```javascript
// –ü—Ä–∏–º–µ—Ä: LCP —É–ª—É—á—à–µ–Ω–∏–µ —Å fetchpriority="high"
// –î–æ: LCP = 3.2s
// –ü–æ—Å–ª–µ: LCP = 2.1s (—É–ª—É—á—à–µ–Ω–∏–µ –Ω–∞ 34%)
```

**–ò—Å—Ç–æ—á–Ω–∏–∫–∏**:

- https://web.dev/fetch-priority/
- https://imkev.dev/fetchpriority-opportunity
- https://chromestatus.com/feature/5760375567941632

#### 3.2 Fetch keepalive

**–°—Ç–∞—Ç—É—Å 2023**:

- Chrome: –ø–æ–ª–Ω–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞ —Å —Ä–∞–Ω–Ω–∏—Ö –≤–µ—Ä—Å–∏–π
- Firefox: –Ω–µ–Ω–∞–¥—ë–∂–Ω–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞ –≤ 2023 (—É–ª—É—á—à–µ–Ω–∞ –≤ Firefox 133, –Ω–æ—è–±—Ä—å 2024)
- Safari: —á–∞—Å—Ç–∏—á–Ω–∞—è/–Ω–µ–Ω–∞–¥—ë–∂–Ω–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞ –≤ 2023

**API**:

```javascript
// –ó–∞–ø—Ä–æ—Å –ø–µ—Ä–µ–∂–∏–≤—ë—Ç –∑–∞–∫—Ä—ã—Ç–∏–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
fetch('/analytics', {
    method: 'POST',
    body: JSON.stringify(analyticsData),
    keepalive: true,
});

// Use case: analytics –ø—Ä–∏ unload
window.addEventListener('beforeunload', () => {
    fetch('/log-session-end', {
        method: 'POST',
        body: JSON.stringify({
            sessionId: currentSessionId,
            duration: sessionDuration,
            timestamp: Date.now(),
        }),
        keepalive: true,
    });
});
```

**–û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è**:

- ‚ö†Ô∏è –ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π —Ä–∞–∑–º–µ—Ä —Ç–µ–ª–∞ –∑–∞–ø—Ä–æ—Å–∞: **64 KiB**
- ‚ö†Ô∏è –¢–æ–ª—å–∫–æ –¥–ª—è POST –∑–∞–ø—Ä–æ—Å–æ–≤ –≤ –∫–æ–Ω—Ç–µ–∫—Å—Ç–µ unload

**–ü—Ä–æ–±–ª–µ–º—ã –≤ 2023**:

- Firefox: –∑–∞–ø—Ä–æ—Å—ã —á–∞—Å—Ç–æ –Ω–µ –¥–æ—Ö–æ–¥–∏–ª–∏ –¥–æ —Å–µ—Ä–≤–µ—Ä–∞
- Safari: –Ω–µ–Ω–∞–¥—ë–∂–Ω–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ –Ω–∞ `beforeUnload` event

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è**: –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `navigator.sendBeacon()` –∫–∞–∫ fallback:

```javascript
function sendAnalytics(data) {
    const payload = JSON.stringify(data);

    // –ü–æ–ø—ã—Ç–∫–∞ 1: fetch —Å keepalive
    if ('fetch' in window && payload.length <= 65536) {
        fetch('/analytics', {
            method: 'POST',
            body: payload,
            keepalive: true,
            headers: { 'Content-Type': 'application/json' },
        }).catch(() => {
            // Fallback –Ω–∞ sendBeacon
            navigator.sendBeacon('/analytics', payload);
        });
    } else {
        // Fallback –¥–ª—è —É—Å—Ç–∞—Ä–µ–≤—à–∏—Ö –±—Ä–∞—É–∑–µ—Ä–æ–≤
        navigator.sendBeacon('/analytics', payload);
    }
}

window.addEventListener('visibilitychange', () => {
    if (document.visibilityState === 'hidden') {
        sendAnalytics(collectAnalyticsData());
    }
});
```

**Baseline Status**: Newly available (–æ–∂–∏–¥–∞–µ—Ç—Å—è –≤ Firefox 133, –Ω–æ—è–±—Ä—å 2024)

**–ò—Å—Ç–æ—á–Ω–∏–∫–∏**:

- https://bugzilla.mozilla.org/show_bug.cgi?id=1342484
- https://www.stefanjudis.com/today-i-learned/fetch-supports-a-keepalive-option-to-make-it-outlive-page-navigations/
- https://developer.mozilla.org/en-US/docs/Web/API/fetch

### 4. Service Workers ‚Äî –Ω–æ–≤—ã–µ API –∏ —É–ª—É—á—à–µ–Ω–∏—è

#### 4.1 Service Worker Static Routing API

**–°—Ç–∞—Ç—É—Å 2023**:

- **Chrome 116 (–∞–≤–≥—É—Å—Ç 2023)**: origin trial ‚≠ê
- **Chrome 123 (–º–∞—Ä—Ç 2024)**: –ø–æ–ª–Ω—ã–π –∑–∞–ø—É—Å–∫ (–Ω–æ –ø—Ä–æ—Ü–µ—Å—Å –Ω–∞—á–∞–ª—Å—è –≤ 2023)
- Firefox: –ø–æ–ª–æ–∂–∏—Ç–µ–ª—å–Ω–∞—è standards position, –Ω–æ –Ω–µ—Ç —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ –≤ 2023
- Safari: –Ω–µ–æ—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã–µ –ø–æ–ª–æ–∂–∏—Ç–µ–ª—å–Ω—ã–µ —Å–∏–≥–Ω–∞–ª—ã, –Ω–æ –Ω–µ—Ç —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ –≤ 2023

**API**:

```javascript
// –í Service Worker install event
self.addEventListener('install', (event) => {
    event.addRoutes([
        {
            condition: {
                urlPattern: '/static/*',
            },
            source: 'network', // –í—Å–µ–≥–¥–∞ –∑–∞–≥—Ä—É–∂–∞—Ç—å –∏–∑ —Å–µ—Ç–∏
        },
        {
            condition: {
                urlPattern: '/api/*',
            },
            source: 'network',
        },
        {
            condition: {
                urlPattern: '/images/*',
                requestMethod: 'GET',
            },
            source: 'cache',
            cacheName: 'images-cache', // –ó–∞–≥—Ä—É–∂–∞—Ç—å –∏–∑ –∫–µ—à–∞
        },
        {
            condition: {
                urlPattern: '/',
                requestMethod: 'GET',
            },
            source: 'fetch-event', // –û–±—Ä–∞–±–æ—Ç–∞—Ç—å —á–µ—Ä–µ–∑ fetch event handler
        },
    ]);
});
```

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**:

- ‚úÖ –î–µ–∫–ª–∞—Ä–∞—Ç–∏–≤–Ω—ã–π routing –±–µ–∑ –∑–∞–ø—É—Å–∫–∞ Service Worker
- ‚úÖ –ò–∑–±–µ–∂–∞–Ω–∏–µ overhead –Ω–∞ startup Service Worker –¥–ª—è –ø—Ä–æ—Å—Ç—ã—Ö —Å–ª—É—á–∞–µ–≤
- ‚úÖ –£–ª—É—á—à–µ–Ω–∏–µ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –¥–ª—è cache-first –∏–ª–∏ network-first —Å—Ç—Ä–∞—Ç–µ–≥–∏–π

**Performance Benefits**:

- –°–Ω–∏–∂–µ–Ω–∏–µ –≤—Ä–µ–º–µ–Ω–∏ –∑–∞–ø—É—Å–∫–∞ Service Worker
- –ü—Ä—è–º–æ–π fetch –∏–∑ –∫–µ—à–∞ –∏–ª–∏ —Å–µ—Ç–∏ –±–µ–∑ JavaScript execution
- –û—Å–æ–±–µ–Ω–Ω–æ –ø–æ–ª–µ–∑–Ω–æ –¥–ª—è —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏—Ö —Ä–µ—Å—É—Ä—Å–æ–≤

**–°—Ä–∞–≤–Ω–µ–Ω–∏–µ: Traditional vs Static Routing**:

```javascript
// Traditional approach (requires SW startup)
self.addEventListener('fetch', (event) => {
    const url = new URL(event.request.url);

    if (url.pathname.startsWith('/static/')) {
        event.respondWith(fetch(event.request)); // Network
    } else if (url.pathname.startsWith('/images/')) {
        event.respondWith(
            caches.match(event.request).then((cached) => cached || fetch(event.request)),
        );
    }
});

// Static Routing approach (no SW startup for matched routes)
self.addEventListener('install', (event) => {
    event.addRoutes([
        { condition: { urlPattern: '/static/*' }, source: 'network' },
        { condition: { urlPattern: '/images/*' }, source: 'cache', cacheName: 'images' },
    ]);
});
```

**–ò—Å—Ç–æ—á–Ω–∏–∫–∏**:

- https://developer.chrome.com/blog/service-worker-static-routing-api-origin-trial
- https://developer.chrome.com/blog/service-worker-static-routing
- https://github.com/WICG/service-worker-static-routing-api

#### 4.2 Navigation Preload

**–°—Ç–∞—Ç—É—Å (—Å—Ç–∞–±–∏–ª—å–Ω—ã–π —Å 2018, –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ 2023)**:

- Chrome: —Å –≤–µ—Ä—Å–∏–∏ 59
- Firefox: —Å –≤–µ—Ä—Å–∏–∏ 99 (–º–∞–π 2022)
- Safari: –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è –≤ 2023

**API**:

```javascript
// –í–∫–ª—é—á–µ–Ω–∏–µ navigation preload
self.addEventListener('activate', (event) => {
    event.waitUntil(self.registration.navigationPreload.enable());
});

// –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –≤ fetch event
self.addEventListener('fetch', (event) => {
    if (event.request.mode === 'navigate') {
        event.respondWith(
            (async function () {
                try {
                    // –ü–æ–ª—É—á–∏—Ç—å preloaded response
                    const preloadResponse = await event.preloadResponse;
                    if (preloadResponse) {
                        return preloadResponse;
                    }
                } catch (error) {
                    console.error('Preload failed:', error);
                }

                // Fallback: –æ–±—ã—á–Ω—ã–π fetch
                return fetch(event.request);
            })(),
        );
    }
});
```

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**:

- –ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã–π –∑–∞–ø—Ä–æ—Å –∫ —Å–µ—Ç–∏ –≤–æ –≤—Ä–µ–º—è startup Service Worker
- –£–º–µ–Ω—å—à–µ–Ω–∏–µ –ª–∞—Ç–µ–Ω—Ç–Ω–æ—Å—Ç–∏ –¥–ª—è –Ω–∞–≤–∏–≥–∞—Ü–∏–æ–Ω–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤
- –û—Å–æ–±–µ–Ω–Ω–æ –ø–æ–ª–µ–∑–Ω–æ –¥–ª—è –º–µ–¥–ª–µ–Ω–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤

**–ò—Å—Ç–æ—á–Ω–∏–∫–∏**:

- https://developer.mozilla.org/en-US/docs/Web/API/NavigationPreloadManager

### 5. WebTransport ‚Äî –Ω–æ–≤—ã–π –ø—Ä–æ—Ç–æ–∫–æ–ª

#### 5.1 Browser Support (2023)

**–°—Ç–∞—Ç—É—Å**:

- **Chrome 97+ (—è–Ω–≤–∞—Ä—å 2022, —Å—Ç–∞–±–∏–ª—å–Ω–æ –≤ 2023)**: –ø–æ–ª–Ω–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞ ‚≠ê
- **Firefox 114 (–∏—é–Ω—å 2023)**: –ø–æ–ª–Ω–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞ ‚≠ê
- Safari: –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è –≤ 2023
- Edge: —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞–Ω —Å Chrome (–≤–µ—Ä—Å–∏—è 97+)

**–ö–ª—é—á–µ–≤–∞—è –≤–µ—Ö–∞ 2023**: Firefox 114 –¥–æ–±–∞–≤–∏–ª –ø–æ–¥–¥–µ—Ä–∂–∫—É WebTransport –≤ –∏—é–Ω–µ 2023.

#### 5.2 –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏

**WebTransport**:

- –ë–∞–∑–∏—Ä—É–µ—Ç—Å—è –Ω–∞ HTTP/3 –∏ QUIC
- Bidirectional streaming
- **Unreliable datagram transport** (–∫–∞–∫ UDP)
- Multiplexing –±–µ–∑ head-of-line blocking
- –ü–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è real-time –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π: –∏–≥—Ä—ã, –≤–∏–¥–µ–æ-—Å—Ç—Ä–∏–º–∏–Ω–≥, WebRTC –∑–∞–º–µ–Ω–∞

**API**:

```javascript
// –°–æ–∑–¥–∞–Ω–∏–µ WebTransport —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è
const url = 'https://example.com:4433/webtransport';
const transport = new WebTransport(url);

// –û–∂–∏–¥–∞–Ω–∏–µ –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏
await transport.ready;
console.log('WebTransport connected');

// === Datagrams (unreliable, –∫–∞–∫ UDP) ===
const datagramWriter = transport.datagrams.writable.getWriter();
const datagramReader = transport.datagrams.readable.getReader();

// –û—Ç–ø—Ä–∞–≤–∫–∞ datagrams
await datagramWriter.write(new Uint8Array([1, 2, 3, 4]));

// –ü–æ–ª—É—á–µ–Ω–∏–µ datagrams
while (true) {
    const { value, done } = await datagramReader.read();
    if (done) break;
    console.log('Received datagram:', value);
}

// === Bidirectional Streams (reliable, –∫–∞–∫ TCP) ===
const stream = await transport.createBidirectionalStream();
const streamWriter = stream.writable.getWriter();
const streamReader = stream.readable.getReader();

// –ó–∞–ø–∏—Å—å –≤ stream
const encoder = new TextEncoder();
await streamWriter.write(encoder.encode('Hello from client!'));

// –ß—Ç–µ–Ω–∏–µ –∏–∑ stream
const { value, done } = await streamReader.read();
const decoder = new TextDecoder();
console.log('Received:', decoder.decode(value));

// === Unidirectional Streams ===
// –û—Ç–ø—Ä–∞–≤–∫–∞ (send-only)
const sendStream = await transport.createUnidirectionalStream();
const sendWriter = sendStream.getWriter();
await sendWriter.write(encoder.encode('One-way message'));
await sendWriter.close();

// –ü–æ–ª—É—á–µ–Ω–∏–µ (receive-only)
const receiveStreams = transport.incomingUnidirectionalStreams;
const receiveReader = receiveStreams.getReader();
const { value: receiveStream } = await receiveReader.read();
const receiveStreamReader = receiveStream.getReader();
const { value: data } = await receiveStreamReader.read();

// –ó–∞–∫—Ä—ã—Ç–∏–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è
transport.close({ closeCode: 0, reason: 'Done' });
```

**–°—Ä–∞–≤–Ω–µ–Ω–∏–µ —Å WebSocket**:

| –§—É–Ω–∫—Ü–∏—è               | WebSocket   | WebTransport                   |
| --------------------- | ----------- | ------------------------------ |
| –ü—Ä–æ—Ç–æ–∫–æ–ª              | TCP         | QUIC (UDP)                     |
| Reliable              | –î–∞ (–≤—Å–µ–≥–¥–∞) | –î–∞ (streams) + –ù–µ—Ç (datagrams) |
| Unreliable            | –ù–µ—Ç         | –î–∞ (datagrams)                 |
| Multiplexing          | –û–¥–∏–Ω –ø–æ—Ç–æ–∫  | –ú–Ω–æ–∂–µ—Å—Ç–≤–æ streams              |
| Latency               | –í—ã—à–µ        | –ù–∏–∂–µ                           |
| Head-of-line blocking | –î–∞          | –ù–µ—Ç                            |
| Connection migration  | –ù–µ—Ç         | –î–∞                             |

**Use Cases**:

- üéÆ **–û–Ω–ª–∞–π–Ω –∏–≥—Ä—ã**: –Ω–∏–∑–∫–∞—è –ª–∞—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å, datagrams –¥–ª—è –ø–æ–∑–∏—Ü–∏–æ–Ω–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
- üìπ **–í–∏–¥–µ–æ-—Å—Ç—Ä–∏–º–∏–Ω–≥**: –º–Ω–æ–∂–µ—Å—Ç–≤–æ streams –¥–ª—è –≤–∏–¥–µ–æ/–∞—É–¥–∏–æ/–º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö
- üí¨ **Real-time —á–∞—Ç—ã**: –±—ã—Å—Ç—Ä–∞—è –¥–æ—Å—Ç–∞–≤–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏–π
- üìä **Live –¥–∞–Ω–Ω—ã–µ**: —Ñ–∏–Ω–∞–Ω—Å–æ–≤—ã–µ —Ç–∏–∫–µ—Ä—ã, –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

**–ü—Ä–∏–º–µ—Ä: Real-time –∏–≥—Ä–∞**:

```javascript
// –ö–ª–∏–µ–Ω—Ç (–±—Ä–∞—É–∑–µ—Ä)
const transport = new WebTransport('https://game-server.example/webtransport');
await transport.ready;

const datagramWriter = transport.datagrams.writable.getWriter();
const datagramReader = transport.datagrams.readable.getReader();

// –û—Ç–ø—Ä–∞–≤–∫–∞ –ø–æ–∑–∏—Ü–∏–∏ –∏–≥—Ä–æ–∫–∞ (unreliable, –Ω–∏–∑–∫–∞—è –ª–∞—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å)
function sendPlayerPosition(x, y, z) {
    const buffer = new ArrayBuffer(12);
    const view = new DataView(buffer);
    view.setFloat32(0, x, true);
    view.setFloat32(4, y, true);
    view.setFloat32(8, z, true);
    datagramWriter.write(new Uint8Array(buffer));
}

setInterval(() => {
    sendPlayerPosition(player.x, player.y, player.z);
}, 50); // 20 updates/sec

// –ü–æ–ª—É—á–µ–Ω–∏–µ –ø–æ–∑–∏—Ü–∏–π –¥—Ä—É–≥–∏—Ö –∏–≥—Ä–æ–∫–æ–≤
(async () => {
    while (true) {
        const { value, done } = await datagramReader.read();
        if (done) break;

        const view = new DataView(value.buffer);
        const otherPlayerX = view.getFloat32(0, true);
        const otherPlayerY = view.getFloat32(4, true);
        const otherPlayerZ = view.getFloat32(8, true);

        updateOtherPlayer(otherPlayerX, otherPlayerY, otherPlayerZ);
    }
})();

// –í–∞–∂–Ω—ã–µ —Å–æ–±—ã—Ç–∏—è (reliable stream)
const eventStream = await transport.createBidirectionalStream();
const eventWriter = eventStream.writable.getWriter();
await eventWriter.write(
    new TextEncoder().encode(
        JSON.stringify({
            type: 'player_action',
            action: 'shoot',
        }),
    ),
);
```

**–ò—Å—Ç–æ—á–Ω–∏–∫–∏**:

- https://developer.mozilla.org/en-US/docs/Web/API/WebTransport
- https://web.dev/webtransport/
- https://caniuse.com/webtransport

### 6. WebRTC ‚Äî —É–ª—É—á—à–µ–Ω–∏—è –ø—Ä–æ—Ç–æ–∫–æ–ª–∞

#### 6.1 Per-Session Permissions (Chrome 116)

**Chrome 116 (–∞–≤–≥—É—Å—Ç 2023)**: –æ–¥–Ω–æ—Ä–∞–∑–æ–≤—ã–µ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è –∫–∞–º–µ—Ä—ã/–º–∏–∫—Ä–æ—Ñ–æ–Ω–∞ ‚≠ê

**–ò–∑–º–µ–Ω–µ–Ω–∏–µ**:

- –î–æ Chrome 116: —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è —Å–æ—Ö—Ä–∞–Ω—è–ª–∏—Å—å –Ω–∞–≤—Å–µ–≥–¥–∞ –∏–ª–∏ –¥–æ —è–≤–Ω–æ–π –æ—Ç–º–µ–Ω—ã
- –° Chrome 116: –æ–ø—Ü–∏—è –¥–ª—è per-session permissions (–∫–∞–∫ –≤ Firefox –∏ Safari)
- –£–ª—É—á—à–µ–Ω–Ω–∞—è –ø—Ä–∏–≤–∞—Ç–Ω–æ—Å—Ç—å: —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–µ –¥–µ–π—Å—Ç–≤—É–µ—Ç —Ç–æ–ª—å–∫–æ –¥–ª—è —Ç–µ–∫—É—â–µ–π —Å–µ—Å—Å–∏–∏

**API (–±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π)**:

```javascript
try {
    const stream = await navigator.mediaDevices.getUserMedia({
        video: { width: 1280, height: 720 },
        audio: true,
    });

    console.log('‚úÖ Camera and microphone access granted');
    videoElement.srcObject = stream;
} catch (error) {
    console.error('‚ùå Permission denied:', error);
}
```

–ë—Ä–∞—É–∑–µ—Ä —Ç–µ–ø–µ—Ä—å –ø—Ä–µ–¥–ª–∞–≥–∞–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é –≤—ã–±–æ—Ä:

- **Allow once** (per-session) ‚Äî –Ω–æ–≤–∞—è –æ–ø—Ü–∏—è
- **Allow always** (persistent)
- **Block**

#### 6.2 WebCodecs API

**–°—Ç–∞—Ç—É—Å 2023**:

- **Chrome 94+ (2021, —Å—Ç–∞–±–∏–ª—å–Ω–æ –≤ 2023)**: –ø–æ–ª–Ω–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞
- **Firefox: Desktop H1 2024** (–ø—Ä–æ—Ü–µ—Å—Å –Ω–∞—á–∞–ª—Å—è –≤ 2023)
- **Safari: VideoDecoder only –≤ 2023**, AudioDecoder –≤ Safari Technology Preview

**API**:

```javascript
// === Video Encoding ===
const encoder = new VideoEncoder({
    output: (chunk, metadata) => {
        // –û–±—Ä–∞–±–æ—Ç–∫–∞ encoded chunk
        console.log('Encoded chunk:', chunk.byteLength, 'bytes');
        // –û—Ç–ø—Ä–∞–≤–∏—Ç—å –Ω–∞ —Å–µ—Ä–≤–µ—Ä –∏–ª–∏ —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å
        sendToServer(chunk);
    },
    error: (e) => {
        console.error('Encoding error:', e);
    },
});

encoder.configure({
    codec: 'vp8',
    width: 1920,
    height: 1080,
    bitrate: 2_000_000, // 2 Mbps
    framerate: 30,
});

// Encode a frame (–∏–∑ canvas –∏–ª–∏ video)
const videoFrame = new VideoFrame(canvas, { timestamp: 0 });
encoder.encode(videoFrame, { keyFrame: true });
videoFrame.close();

// === Video Decoding ===
const decoder = new VideoDecoder({
    output: (frame) => {
        // Render frame
        ctx.drawImage(frame, 0, 0);
        frame.close();
    },
    error: (e) => {
        console.error('Decoding error:', e);
    },
});

decoder.configure({
    codec: 'vp8',
    codedWidth: 1920,
    codedHeight: 1080,
});

// Decode encoded chunk
decoder.decode(encodedChunk);
```

**Use Cases**:

- üé• **Video editing –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è** –≤ –±—Ä–∞—É–∑–µ—Ä–µ
- üìπ **–ö–∞—Å—Ç–æ–º–Ω—ã–µ streaming —Ä–µ—à–µ–Ω–∏—è**
- üé¨ **–ö–æ–¥–∏—Ä–æ–≤–∞–Ω–∏–µ/–¥–µ–∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏–µ** –±–µ–∑ WebRTC
- üñºÔ∏è **–û–±—Ä–∞–±–æ—Ç–∫–∞ –≤–∏–¥–µ–æ** –ø–µ—Ä–µ–¥ –∑–∞–≥—Ä—É–∑–∫–æ–π –Ω–∞ —Å–µ—Ä–≤–µ—Ä

**Codec Support** (–∑–∞–≤–∏—Å–∏—Ç –æ—Ç –±—Ä–∞—É–∑–µ—Ä–∞ –∏ –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã):

- VP8, VP9, H.264, H.265, AV1

**–ò—Å—Ç–æ—á–Ω–∏–∫–∏**:

- https://developer.mozilla.org/en-US/docs/Web/API/WebCodecs_API
- https://caniuse.com/webcodecs
- https://developer.chrome.com/docs/web-platform/best-practices/webcodecs

### 7. Resource Loading ‚Äî priority hints, preload, prefetch

#### 7.1 Import Maps

**–°—Ç–∞—Ç—É—Å 2023**:

- **Chrome 89+ (–º–∞—Ä—Ç 2021, —Å—Ç–∞–±–∏–ª—å–Ω–æ –≤ 2023)**: –ø–æ–ª–Ω–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞
- **Firefox 109 (—è–Ω–≤–∞—Ä—å 2023)**: –ø–æ–ª–Ω–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞ ‚≠ê
- **Safari 16.4 (–º–∞—Ä—Ç 2023)**: –ø–æ–ª–Ω–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞ ‚≠ê
- Edge 89+: –ø–æ–ª–Ω–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞

**Baseline Status**: **Newly Available (–º–∞—Ä—Ç 2023)** ‚≠ê

**–ö–ª—é—á–µ–≤–∞—è –≤–µ—Ö–∞ 2023**: Safari 16.4 –∏ Firefox 109 –¥–æ–±–∞–≤–∏–ª–∏ –ø–æ–¥–¥–µ—Ä–∂–∫—É, –¥–æ—Å—Ç–∏–≥–Ω—É–≤ –ø–æ–ª–Ω–æ–π
–∫—Ä–æ—Å—Å–±—Ä–∞—É–∑–µ—Ä–Ω–æ–π —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏.

**API**:

```html
<script type="importmap">
    {
        "imports": {
            "lodash": "/node_modules/lodash-es/lodash.js",
            "react": "https://cdn.skypack.dev/react@18",
            "react-dom": "https://cdn.skypack.dev/react-dom@18",
            "utils/": "/js/utils/",
            "components/": "/js/components/"
        },
        "scopes": {
            "/admin/": {
                "lodash": "/js/lodash-custom.js"
            }
        }
    }
</script>

<script type="module">
    // Bare specifiers —Ä–∞–∑—Ä–µ—à–∞—é—Ç—Å—è —á–µ—Ä–µ–∑ import map
    import _ from 'lodash';
    import React from 'react';
    import { helper } from 'utils/helper.js';
    import { Button } from 'components/button.js';

    console.log('All imports resolved via Import Maps!');
</script>
```

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**:

- ‚úÖ –ö–æ–Ω—Ç—Ä–æ–ª—å —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è module specifiers
- ‚úÖ –ó–∞–º–µ–Ω–∞ bare specifiers –Ω–∞ URLs
- ‚úÖ –£–ø—Ä–æ—â–µ–Ω–∏–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è npm packages –≤ –±—Ä–∞—É–∑–µ—Ä–µ –±–µ–∑ –±–∞–Ω–¥–ª–µ—Ä–∞
- ‚úÖ –í–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ A/B —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –±–∏–±–ª–∏–æ—Ç–µ–∫

**–ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è**:

```html
<!-- Production vs Development -->
<script type="importmap">
    {
        "imports": {
            "react": "https://cdn.skypack.dev/react@18.2.0?min",
            "react-dom": "https://cdn.skypack.dev/react-dom@18.2.0?min"
        }
    }
</script>

<!-- A/B Testing -->
<script type="importmap">
    {
        "imports": {
            "analytics": "/js/analytics-v2.js"
        }
    }
</script>

<!-- Polyfills -->
<script type="importmap">
    {
        "imports": {
            "web-animations": "/polyfills/web-animations.js"
        },
        "scopes": {
            "/legacy-browser/": {
                "lodash": "/js/lodash-es5.js"
            }
        }
    }
</script>
```

**–ò—Å—Ç–æ—á–Ω–∏–∫–∏**:

- https://caniuse.com/import-maps
- https://blog.logrocket.com/es-modules-in-browsers-with-import-maps/
- https://www.infoq.com/news/2023/04/import-maps-generally-available/

#### 7.2 Modulepreload

**–°—Ç–∞—Ç—É—Å 2023**:

- Chrome: —Å –≤–µ—Ä—Å–∏–∏ 66 (–∞–ø—Ä–µ–ª—å 2018)
- Edge: —Å –≤–µ—Ä—Å–∏–∏ 79 (—è–Ω–≤–∞—Ä—å 2020)
- **Firefox 115 (–∏—é–ª—å 2023)**: –¥–æ–±–∞–≤–ª–µ–Ω–∞ –ø–æ–¥–¥–µ—Ä–∂–∫–∞ ‚≠ê
- **Safari 17 (—Å–µ–Ω—Ç—è–±—Ä—å 2023)**: –¥–æ–±–∞–≤–ª–µ–Ω–∞ –ø–æ–¥–¥–µ—Ä–∂–∫–∞ ‚≠ê

**Baseline Status**: **Newly Available (—Å–µ–Ω—Ç—è–±—Ä—å 2023)** ‚≠ê

**API**:

```html
<!-- –ü—Ä–µ–¥–∑–∞–≥—Ä—É–∑–∫–∞ –æ—Å–Ω–æ–≤–Ω–æ–≥–æ –º–æ–¥—É–ª—è -->
<link rel="modulepreload" href="/js/app.js" />

<!-- –ü—Ä–µ–¥–∑–∞–≥—Ä—É–∑–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π -->
<link rel="modulepreload" href="/js/utils.js" />
<link rel="modulepreload" href="/js/components.js" />

<!-- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –º–æ–¥—É–ª–µ–π -->
<script type="module">
    import { init } from '/js/app.js'; // —É–∂–µ preloaded
    init();
</script>
```

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**:

- ‚úÖ Preload ES modules –∏ –∏—Ö dependencies
- ‚úÖ –ü–∞—Ä—Å–∏–Ω–≥ –∏ –∫–æ–º–ø–∏–ª—è—Ü–∏—è –º–æ–¥—É–ª—è –∑–∞—Ä–∞–Ω–µ–µ
- ‚úÖ –•—Ä–∞–Ω–µ–Ω–∏–µ –≤ document's module map

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞**:

- –ë–æ–ª–µ–µ –±—ã—Å—Ç—Ä–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ –º–æ–¥—É–ª–µ–π
- Reduced latency –¥–ª—è module initialization
- –õ—É—á—à–∞—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –¥–ª—è module-based –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π

**–°—Ä–∞–≤–Ω–µ–Ω–∏–µ —Å `rel="preload"`**:

```html
<!-- preload (–¥–ª—è –ª—é–±—ã—Ö —Ä–µ—Å—É—Ä—Å–æ–≤) -->
<link rel="preload" href="/script.js" as="script" />

<!-- modulepreload (—Å–ø–µ—Ü–∏–∞–ª—å–Ω–æ –¥–ª—è ES modules) -->
<link rel="modulepreload" href="/module.js" />
```

**–ò—Å—Ç–æ—á–Ω–∏–∫–∏**:

- https://developer.mozilla.org/en-US/docs/Web/HTML/Reference/Attributes/rel/modulepreload
- https://web.dev/articles/modulepreload
- https://caniuse.com/link-rel-modulepreload

#### 7.3 Speculation Rules API

**–°—Ç–∞—Ç—É—Å 2023**:

- **Chrome 109+ (—è–Ω–≤–∞—Ä—å 2023)**: –ø–æ–ª–Ω–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞ –¥–ª—è prefetch ‚≠ê
- **Chrome 121+ (—è–Ω–≤–∞—Ä—å 2024)**: prerender support (–Ω–æ –ø—Ä–æ—Ü–µ—Å—Å –Ω–∞—á–∞–ª—Å—è –≤ 2023)
- Firefox: –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è –≤ 2023
- Safari: –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è –≤ 2023
- Edge: —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞–Ω —Å Chrome

**API**:

```html
<script type="speculationrules">
    {
        "prefetch": [
            {
                "source": "list",
                "urls": ["/next-page", "/article/123"]
            }
        ],
        "prerender": [
            {
                "source": "list",
                "urls": ["/dashboard"]
            }
        ]
    }
</script>

<!-- Document rules: –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –¥–ª—è –≤—Å–µ—Ö —Å—Å—ã–ª–æ–∫ -->
<script type="speculationrules">
    {
        "prefetch": [
            {
                "source": "document",
                "where": {
                    "selector_matches": "a.prefetch-link"
                },
                "eagerness": "moderate"
            }
        ]
    }
</script>
```

**HTTP Header Alternative**:

```http
Speculation-Rules: "/speculation-rules.json"
```

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**:

- ‚úÖ –î–µ–∫–ª–∞—Ä–∞—Ç–∏–≤–Ω–æ–µ prefetching –∏ prerendering
- ‚úÖ –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –±—Ä–∞—É–∑–µ—Ä—É –¥–ª—è anticipatory loading
- ‚úÖ –£–ª—É—á—à–µ–Ω–∏–µ perceived performance –¥–ª—è –Ω–∞–≤–∏–≥–∞—Ü–∏–∏

**Prefetch vs Prerender**:

- **Prefetch**: –∑–∞–≥—Ä—É–∂–∞–µ—Ç –∫–ª—é—á–µ–≤—ã–µ —Ä–µ—Å—É—Ä—Å—ã, –Ω–æ –Ω–µ —Ä–µ–Ω–¥–µ—Ä–∏—Ç
- **Prerender**: –∑–∞–≥—Ä—É–∂–∞–µ—Ç –ò —Ä–µ–Ω–¥–µ—Ä–∏—Ç —Å—Ç—Ä–∞–Ω–∏—Ü—É –≤ invisible tab

**Performance Impact**:

- Instant –∏–ª–∏ near-instant page loads
- –ó–Ω–∞—á–∏—Ç–µ–ª—å–Ω–æ–µ —É–ª—É—á—à–µ–Ω–∏–µ Core Web Vitals –¥–ª—è –ø–æ—Å–ª–µ–¥—É—é—â–∏—Ö –Ω–∞–≤–∏–≥–∞—Ü–∏–π
- –ü–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω—ã–π overhead –Ω–∞ bandwidth –∏ CPU

**–ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–π –ø—Ä–∏–º–µ—Ä**:

```html
<script type="speculationrules">
    {
        "prefetch": [
            {
                "source": "document",
                "where": {
                    "and": [
                        { "selector_matches": "a[href^='/articles/']" },
                        { "not": { "selector_matches": ".no-prefetch" } }
                    ]
                },
                "eagerness": "moderate"
            }
        ]
    }
</script>

<nav>
    <a href="/articles/one">Article One</a>
    <!-- –ë—É–¥–µ—Ç prefetched -->
    <a href="/articles/two">Article Two</a>
    <!-- –ë—É–¥–µ—Ç prefetched -->
    <a href="/external" class="no-prefetch">External</a>
    <!-- –ù–ï –±—É–¥–µ—Ç prefetched -->
</nav>
```

**–ò—Å—Ç–æ—á–Ω–∏–∫–∏**:

- https://developer.chrome.com/docs/web-platform/prerender-pages
- https://developer.chrome.com/blog/speculation-rules-improvements
- https://developer.mozilla.org/en-US/docs/Web/API/Speculation_Rules_API

## –ß–∞—Å—Ç—å 2: Security & Privacy

### 1. Privacy Sandbox ‚Äî –æ–±—â–∞—è –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å

**7 —Å–µ–Ω—Ç—è–±—Ä—è 2023**: Google –æ–±—ä—è–≤–∏–ª –æ general availability Privacy Sandbox APIs ‚Äî Topics, Protected
Audience, Attribution Reporting, Private Aggregation, Shared Storage –∏ Fenced Frames. –≠—Ç–∏ —Ñ—É–Ω–∫—Ü–∏–∏
–±—ã–ª–∏ –≤–∫–ª—é—á–µ–Ω—ã –¥–ª—è –±–æ–ª–µ–µ —á–µ–º –ø–æ–ª–æ–≤–∏–Ω—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π Google Chrome.

**Chrome Stable 115** (–∏—é–ª—å 2023): –∫–ª—é—á–µ–≤—ã–µ relevance –∏ measurement APIs –≤–≤–µ–¥–µ–Ω—ã –≤ Chrome Stable.

#### 1.1 Topics API

**–û–ø–∏—Å–∞–Ω–∏–µ**:

Topics API –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç signals –¥–ª—è interest-based advertising –±–µ–∑ third-party cookies –∏–ª–∏ –¥—Ä—É–≥–∏—Ö user
identifiers, –∫–æ—Ç–æ—Ä—ã–µ –æ—Ç—Å–ª–µ–∂–∏–≤–∞—é—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π across sites.

**–ú–µ—Ö–∞–Ω–∏–∑–º —Ä–∞–±–æ—Ç—ã**:

1. –ë—Ä–∞—É–∑–µ—Ä –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç "topics of interest" –Ω–∞ –æ—Å–Ω–æ–≤–µ browsing history –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∑–∞ –ø–æ—Å–ª–µ–¥–Ω–∏–µ 3
   –Ω–µ–¥–µ–ª–∏
2. Topics –≤—ã–±–∏—Ä–∞—é—Ç—Å—è –∏–∑ taxonomy –ø—Ä–∏–º–µ—Ä–Ω–æ 350 –∫–∞—Ç–µ–≥–æ—Ä–∏–π (–Ω–∞–ø—Ä–∏–º–µ—Ä, "Travel", "Fitness", "News")
3. API –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –¥–æ 3 topics –¥–ª—è –∫–∞–∂–¥–æ–≥–æ caller (ad tech)
4. Topics –æ–±–Ω–æ–≤–ª—è—é—Ç—Å—è –µ–∂–µ–Ω–µ–¥–µ–ª—å–Ω–æ
5. Topics —Ö—Ä–∞–Ω—è—Ç—Å—è –ª–æ–∫–∞–ª—å–Ω–æ –≤ –±—Ä–∞—É–∑–µ—Ä–µ, –Ω–µ –æ—Ç–ø—Ä–∞–≤–ª—è—é—Ç—Å—è –Ω–∞ —Å–µ—Ä–≤–µ—Ä—ã Google

**Browser support (2023)**:

- **Chrome**: 115+ (—Å–µ–Ω—Ç—è–±—Ä—å 2023, general availability)
- **Firefox**: –Ω–µ—Ç –ø–æ–¥–¥–µ—Ä–∂–∫–∏
- **Safari**: –Ω–µ—Ç –ø–æ–¥–¥–µ—Ä–∂–∫–∏

**API –ø—Ä–∏–º–µ—Ä**:

```javascript
// –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏
if ('browsingTopics' in document) {
    try {
        const topics = await document.browsingTopics();
        console.log('User topics:', topics);

        // topics: Array of topic objects
        // [
        //   { configVersion: "1", modelVersion: "1", taxonomyVersion: "1", topic: 123, version: "1:1:1" },
        //   { configVersion: "1", modelVersion: "1", taxonomyVersion: "1", topic: 456, version: "1:1:1" }
        // ]

        // –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å topics –¥–ª—è –ø–æ–¥–±–æ—Ä–∞ —Ä–µ–∫–ª–∞–º—ã
        const relevantAd = selectAdBasedOnTopics(topics);
        displayAd(relevantAd);
    } catch (error) {
        console.error('Topics API error:', error);
    }
} else {
    console.warn('Topics API not supported');
}
```

**Fetch integration**:

```javascript
fetch('https://ad-server.example/get-topics', {
    browsingTopics: true,
}).then((response) => response.json());
```

**Permissions Policy**:

```http
Permissions-Policy: browsing-topics=(self)
```

**Security –∏ Privacy implications**:

- ‚úÖ –ó–Ω–∞—á–∏—Ç–µ–ª—å–Ω–æ–µ —É–ª—É—á—à–µ–Ω–∏–µ –ø—Ä–∏–≤–∞—Ç–Ω–æ—Å—Ç–∏ –ø–æ —Å—Ä–∞–≤–Ω–µ–Ω–∏—é —Å third-party cookies
- ‚úÖ Topics –æ–≥—Ä–∞–Ω–∏—á–µ–Ω—ã –ø–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤—É (–¥–æ 3 –Ω–∞ caller) –∏ –æ–±–Ω–æ–≤–ª—è—é—Ç—Å—è –µ–∂–µ–Ω–µ–¥–µ–ª—å–Ω–æ
- ‚úÖ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –º–æ–≥—É—Ç –≤–∏–¥–µ—Ç—å –∏ —É–¥–∞–ª—è—Ç—å —Å–≤–æ–∏ topics –≤ Chrome settings
  (`chrome://settings/adPrivacy`)
- ‚úÖ Topics –¥–æ—Å—Ç—É–ø–Ω—ã —Ç–æ–ª—å–∫–æ –¥–ª—è sites, –∫–æ—Ç–æ—Ä—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ –ø–æ—Å–µ—â–∞–ª

**–ò—Å—Ç–æ—á–Ω–∏–∫–∏**:

- https://privacysandbox.google.com/
- https://developers.google.com/privacy-sandbox/overview/feedback/report-2023-q2

#### 1.2 Protected Audience API (—Ä–∞–Ω–µ–µ FLEDGE)

**–û–ø–∏—Å–∞–Ω–∏–µ**:

Protected Audience API –≤—ã–±–∏—Ä–∞–µ—Ç —Ä–µ–∫–ª–∞–º—É –¥–ª—è remarketing –∏ custom audience use cases, –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω
–¥–ª—è —Å–º—è–≥—á–µ–Ω–∏—è third-party tracking across sites.

**–ü–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞–Ω–∏–µ**: —Ä–∞–Ω–µ–µ –Ω–∞–∑—ã–≤–∞–ª—Å—è FLEDGE (First Locally-Executed Decision over Groups Experiment).

**–ú–µ—Ö–∞–Ω–∏–∑–º —Ä–∞–±–æ—Ç—ã**:

1. **Interest Group Creation**: —Å–∞–π—Ç—ã –¥–æ–±–∞–≤–ª—è—é—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –≤ "interest groups"

```javascript
await navigator.joinAdInterestGroup(
    {
        owner: 'https://advertiser.example',
        name: 'running-shoes-2023',
        biddingLogicUrl: 'https://advertiser.example/bid.js',
        trustedBiddingSignalsUrl: 'https://advertiser.example/signals',
        trustedBiddingSignalsKeys: ['key1', 'key2'],
        userBiddingSignals: { interestedInRunning: true },
        ads: [
            {
                renderUrl: 'https://advertiser.example/ads/shoe1.html',
                metadata: { price: 99.99, size: '42' },
            },
            {
                renderUrl: 'https://advertiser.example/ads/shoe2.html',
                metadata: { price: 129.99, size: '44' },
            },
        ],
    },
    30 * 24 * 60 * 60 * 1000,
); // 30 –¥–Ω–µ–π
```

2. **On-device Auction**: –±—Ä–∞—É–∑–µ—Ä –ø—Ä–æ–≤–æ–¥–∏—Ç –∞—É–∫—Ü–∏–æ–Ω –ª–æ–∫–∞–ª—å–Ω–æ

```javascript
const auctionConfig = {
    seller: 'https://ssp.example',
    decisionLogicUrl: 'https://ssp.example/auction.js',
    interestGroupBuyers: ['https://advertiser.example', 'https://another-advertiser.example'],
    auctionSignals: { contextualSignals: { page: 'product-page' } },
    sellerSignals: { publisherId: '12345' },
    perBuyerSignals: {
        'https://advertiser.example': { budget: 1000 },
    },
    perBuyerTimeouts: {
        'https://advertiser.example': 100, // ms
    },
};

const adUrl = await navigator.runAdAuction(auctionConfig);

if (adUrl) {
    console.log('Auction won, ad URL:', adUrl);
    // –†–µ–Ω–¥–µ—Ä–∏—Ç—å –≤ Fenced Frame
    const fencedFrame = document.createElement('fencedframe');
    fencedFrame.config = adUrl;
    document.getElementById('ad-slot').appendChild(fencedFrame);
} else {
    console.log('No ad won the auction');
}
```

3. **Fenced Frame Rendering**: —Ä–µ–∫–ª–∞–º–∞ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –≤ Fenced Frame –¥–ª—è –∏–∑–æ–ª—è—Ü–∏–∏

**Browser support (2023)**:

- **Chrome**: 115+ (general availability)
- **Firefox**: –Ω–µ—Ç –ø–æ–¥–¥–µ—Ä–∂–∫–∏
- **Safari**: –Ω–µ—Ç –ø–æ–¥–¥–µ—Ä–∂–∫–∏

**Permissions Policy**:

```http
Permissions-Policy: join-ad-interest-group=(self), run-ad-auction=(self)
```

**Security implications**:

- ‚úÖ Interest groups —Ö—Ä–∞–Ω—è—Ç—Å—è –ª–æ–∫–∞–ª—å–Ω–æ, –Ω–µ –ø–µ—Ä–µ–¥–∞—é—Ç—Å—è —Å–µ—Ä–≤–µ—Ä–∞–º
- ‚úÖ –ê—É–∫—Ü–∏–æ–Ω—ã –ø—Ä–æ–≤–æ–¥—è—Ç—Å—è on-device, bidding logic –Ω–µ –º–æ–∂–µ—Ç access browsing history
- ‚úÖ Fenced Frames –∏–∑–æ–ª–∏—Ä—É—é—Ç ad content –æ—Ç publisher page
- ‚úÖ Reporting –æ–≥—Ä–∞–Ω–∏—á–µ–Ω –∏ aggregated

**–ò—Å—Ç–æ—á–Ω–∏–∫–∏**:

- https://developers.google.com/privacy-sandbox/relevance/protected-audience

#### 1.3 Attribution Reporting API

**–û–ø–∏—Å–∞–Ω–∏–µ**:

Attribution Reporting API –ø–æ–∑–≤–æ–ª—è–µ—Ç –∫–æ—Ä—Ä–µ–ª–∏—Ä–æ–≤–∞—Ç—å ad clicks –∏–ª–∏ ad views —Å conversions. Ad techs
–º–æ–≥—É—Ç –≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å event-level –∏–ª–∏ summary reports.

**–î–≤–∞ —Ç–∏–ø–∞ –æ—Ç—á—ë—Ç–æ–≤**:

1. **Event-level reports**: –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –æ conversion (64 –±–∏—Ç–∞)
2. **Summary (aggregate) reports**: –¥–µ—Ç–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ —Å differential privacy noise

**–ú–µ—Ö–∞–Ω–∏–∑–º —Ä–∞–±–æ—Ç—ã**:

1. **Attribution Source Registration** (click –∏–ª–∏ view):

```html
<!-- Image ad -->
<img
    src="https://ad-server.example/ad.jpg"
    attributionsrc="https://ad-server.example/register-source"
/>

<!-- Link ad -->
<a
    href="https://advertiser.example/product"
    attributionsrc="https://ad-server.example/register-source"
>
    Buy Now
</a>
```

Server response:

```http
Attribution-Reporting-Register-Source: {
  "source_event_id": "123456789",
  "destination": "https://advertiser.example",
  "expiry": "604800",
  "priority": "100",
  "debug_key": "987654321"
}
```

2. **Attribution Trigger Registration** (conversion):

```javascript
// –ù–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ conversion (advertiser.example)
fetch('https://ad-server.example/register-trigger', {
    attributionReporting: {
        eventSourceEligible: true,
        triggerEligible: true,
    },
});
```

Server response:

```http
Attribution-Reporting-Register-Trigger: {
  "event_trigger_data": [{
    "trigger_data": "2",
    "priority": "100"
  }],
  "debug_key": "123456789"
}
```

3. **Report Generation**: –±—Ä–∞—É–∑–µ—Ä –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –∏ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç reports —Å delay

**Event-level report example** (JSON payload):

```json
{
    "attribution_destination": "https://advertiser.example",
    "source_event_id": "123456789",
    "trigger_data": "2",
    "source_type": "navigation",
    "report_id": "abc-def-ghi",
    "randomized_trigger_rate": 0.0001
}
```

**Browser support (2023)**:

- **Chrome**: 115+ (general availability)
- **Firefox**: –Ω–µ—Ç –ø–æ–¥–¥–µ—Ä–∂–∫–∏
- **Safari**: —Å–æ–±—Å—Ç–≤–µ–Ω–Ω–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è ‚Äî Private Click Measurement (PCM)

**Security –∏ Privacy implications**:

- ‚úÖ Event-level reports: limited data + noise –¥–ª—è –∑–∞—â–∏—Ç—ã privacy
- ‚úÖ Aggregate reports: detailed data —Å differential privacy
- ‚úÖ Reports –æ—Ç–ø—Ä–∞–≤–ª—è—é—Ç—Å—è —Å delay –¥–ª—è –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏—è timing attacks
- ‚úÖ No access –∫ user identifiers

**–ò—Å—Ç–æ—á–Ω–∏–∫–∏**:

- https://developers.google.com/privacy-sandbox/relevance/attribution-reporting

#### 1.4 Shared Storage API

**–û–ø–∏—Å–∞–Ω–∏–µ**:

Shared Storage API –ø–æ–∑–≤–æ–ª—è–µ—Ç sites —Ö—Ä–∞–Ω–∏—Ç—å –∏ access unpartitioned cross-site data –≤ secure
environment.

**Use cases**:

- Frequency capping across sites
- A/B testing across sites
- Creative selection based on cross-site data

**–ö–ª—é—á–µ–≤—ã–µ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏**:

1. **–î–∞–Ω–Ω—ã–µ –ø–∏—à—É—Ç—Å—è –æ—Ç–∫—Ä—ã—Ç–æ, —á–∏—Ç–∞—é—Ç—Å—è –≤ –∏–∑–æ–ª–∏—Ä–æ–≤–∞–Ω–Ω–æ–º –æ–∫—Ä—É–∂–µ–Ω–∏–∏**
2. **Output gates –æ–≥—Ä–∞–Ω–∏—á–∏–≤–∞—é—Ç —É—Ç–µ—á–∫—É –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏**:
    - Select URL (–≤—ã–±–æ—Ä –∏–∑ –∑–∞—Ä–∞–Ω–µ–µ –æ–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω—ã—Ö URLs)
    - Private Aggregation (aggregated reports —Å noise)

**–ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è ‚Äî Frequency Capping**:

```javascript
// === –ó–∞–ø–∏—Å—å –≤ Shared Storage ===
await window.sharedStorage.set('frequency-cap-count', '3');
await window.sharedStorage.set('last-impression', Date.now().toString());

// === Worklet module (frequency-cap-worklet.js) ===
class FrequencyCapOperation {
    async run(urls, data) {
        const count = parseInt((await this.sharedStorage.get('frequency-cap-count')) || '0');
        const maxImpressions = data.maxImpressions || 5;

        if (count >= maxImpressions) {
            return 1; // default ad URL (index 1)
        }

        // –£–≤–µ–ª–∏—á–∏—Ç—å —Å—á—ë—Ç—á–∏–∫
        await this.sharedStorage.set('frequency-cap-count', String(count + 1));
        return 0; // targeted ad URL (index 0)
    }
}

register('frequency-cap-operation', FrequencyCapOperation);

// === –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ ===
// –ó–∞–≥—Ä—É–∑–∏—Ç—å worklet
await window.sharedStorage.worklet.addModule('frequency-cap-worklet.js');

// –í—ã–±—Ä–∞—Ç—å URL –Ω–∞ –æ—Å–Ω–æ–≤–µ frequency cap
const opaqueURL = await window.sharedStorage.selectURL(
    'frequency-cap-operation',
    [
        { url: 'https://advertiser.example/targeted-ad.html' },
        { url: 'https://advertiser.example/default-ad.html' },
    ],
    { data: { maxImpressions: 5 } },
);

// –†–µ–Ω–¥–µ—Ä–∏—Ç—å –≤ Fenced Frame
const fencedFrame = document.createElement('fencedframe');
fencedFrame.config = opaqueURL;
document.getElementById('ad-slot').appendChild(fencedFrame);
```

**Browser support (2023)**:

- **Chrome**: 115+ (general availability)
- **Firefox**: –Ω–µ—Ç –ø–æ–¥–¥–µ—Ä–∂–∫–∏
- **Safari**: –Ω–µ—Ç –ø–æ–¥–¥–µ—Ä–∂–∫–∏

**Permissions Policy**:

```http
Permissions-Policy: shared-storage=(self)
```

**Security implications**:

Output gates –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏ –≤–∞–∂–Ω—ã –¥–ª—è –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏—è —É—Ç–µ—á–∫–∏ cross-site information. Worklet environment
–∏–∑–æ–ª–∏—Ä–æ–≤–∞–Ω –∏ –Ω–µ –∏–º–µ–µ—Ç –¥–æ—Å—Ç—É–ø–∞ –∫ network –∏–ª–∏ DOM.

**–ò—Å—Ç–æ—á–Ω–∏–∫–∏**:

- https://developers.google.com/privacy-sandbox/relevance/shared-storage

#### 1.5 Fenced Frames

**–û–ø–∏—Å–∞–Ω–∏–µ**:

Fenced Frames ‚Äî —ç—Ç–æ HTML element –¥–ª—è embedded content, –∫–æ—Ç–æ—Ä–æ–µ –∏–∑–æ–ª–∏—Ä—É–µ—Ç content –æ—Ç embedding page,
–ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞—è communication –∏ data sharing.

**–û—Ç–ª–∏—á–∏—è –æ—Ç iframe**:

| Feature                | iframe                           | Fenced Frame                       |
| ---------------------- | -------------------------------- | ---------------------------------- |
| Communication —Å parent | `postMessage`, shared DOM access | –ó–∞–ø—Ä–µ—â–µ–Ω–æ                          |
| Network access         | –ü–æ–ª–Ω—ã–π                           | –û–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω—ã–π                       |
| Storage access         | Shared —Å top-level               | Partitioned                        |
| Use case               | –õ—é–±–æ–π embedded content           | –†–µ–∫–ª–∞–º–Ω—ã–π content, Privacy Sandbox |

**–°–∏–Ω—Ç–∞–∫—Å–∏—Å**:

```html
<fencedframe src="https://advertiser.example/ad.html" width="300" height="250"> </fencedframe>
```

**–° Protected Audience API**:

```javascript
const adUrl = await navigator.runAdAuction(auctionConfig);

const fencedFrame = document.createElement('fencedframe');
fencedFrame.config = adUrl; // opaque URL
fencedFrame.width = 300;
fencedFrame.height = 250;
document.getElementById('ad-slot').appendChild(fencedFrame);
```

**Browser support (2023)**:

- **Chrome**: 115+ (general availability)
- **Firefox**: –Ω–µ—Ç –ø–æ–¥–¥–µ—Ä–∂–∫–∏
- **Safari**: –Ω–µ—Ç –ø–æ–¥–¥–µ—Ä–∂–∫–∏

**Security implications**:

–°—Ç—Ä–æ–≥–∞—è –∏–∑–æ–ª—è—Ü–∏—è –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ—Ç tracking —á–µ—Ä–µ–∑ embedded content. Fenced Frames essential –¥–ª—è Privacy
Sandbox, –æ–±–µ—Å–ø–µ—á–∏–≤–∞—è –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –ø–æ–∫–∞–∑–∞ –ø–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–æ–π —Ä–µ–∫–ª–∞–º—ã –±–µ–∑ —É—Ç–µ—á–∫–∏ user data.

**–ò—Å—Ç–æ—á–Ω–∏–∫–∏**:

- https://developers.google.com/privacy-sandbox/relevance/fenced-frame

### 2. Content Security Policy (CSP)

#### 2.1 CSP Level 3 ‚Äî —Å—Ç–∞—Ç—É—Å —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏–∏

**–°–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏—è**: [W3C Content Security Policy Level 3](https://www.w3.org/TR/CSP3/)

**–°—Ç–∞—Ç—É—Å –ø–æ —Å–æ—Å—Ç–æ—è–Ω–∏—é –Ω–∞ 2023**: Working Draft (WD), —Ä–∞–±–æ—Ç–∞ –Ω–∞–¥ —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏–µ–π –ø—Ä–æ–¥–æ–ª–∂–∞–µ—Ç—Å—è

CSP Level 3 –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ —Å—Ç–∞—Ç—É—Å–µ Working Draft –≤ —Ä–∞–º–∫–∞—Ö W3C Web Application Security Working Group.

#### 2.2 CSP Level 3 –¥–∏—Ä–µ–∫—Ç–∏–≤—ã ‚Äî `script-src-elem` –∏ `script-src-attr`

–≠—Ç–∏ –¥–∏—Ä–µ–∫—Ç–∏–≤—ã —è–≤–ª—è—é—Ç—Å—è –¥–æ–ø–æ–ª–Ω–µ–Ω–∏—è–º–∏ CSP Level 3, –æ–±–µ—Å–ø–µ—á–∏–≤–∞—é—â–∏–º–∏ –±–æ–ª–µ–µ –≥—Ä–∞–Ω—É–ª—è—Ä–Ω—ã–π –∫–æ–Ω—Ç—Ä–æ–ª—å –Ω–∞–¥
–≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ–º JavaScript.

**–û–ø–∏—Å–∞–Ω–∏–µ**:

- `script-src-elem` ‚Äî —É–∫–∞–∑—ã–≤–∞–µ—Ç –¥–æ–ø—É—Å—Ç–∏–º—ã–µ –∏—Å—Ç–æ—á–Ω–∏–∫–∏ –¥–ª—è —ç–ª–µ–º–µ–Ω—Ç–æ–≤ `<script>`
- `script-src-attr` ‚Äî —É–∫–∞–∑—ã–≤–∞–µ—Ç –¥–æ–ø—É—Å—Ç–∏–º—ã–µ –∏—Å—Ç–æ—á–Ω–∏–∫–∏ –¥–ª—è inline –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤ —Å–æ–±—ã—Ç–∏–π JavaScript
  (–Ω–∞–ø—Ä–∏–º–µ—Ä, `onclick`, `onerror`)
- `style-src-elem` ‚Äî —É–∫–∞–∑—ã–≤–∞–µ—Ç –¥–æ–ø—É—Å—Ç–∏–º—ã–µ –∏—Å—Ç–æ—á–Ω–∏–∫–∏ –¥–ª—è —ç–ª–µ–º–µ–Ω—Ç–æ–≤ `<style>` –∏
  `<link rel="stylesheet">`
- `style-src-attr` ‚Äî —É–∫–∞–∑—ã–≤–∞–µ—Ç –¥–æ–ø—É—Å—Ç–∏–º—ã–µ –∏—Å—Ç–æ—á–Ω–∏–∫–∏ –¥–ª—è inline —Å—Ç–∏–ª–µ–π

**Browser support (2023)**:

- **Chrome**: —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ –≤ –≤–µ—Ä—Å–∏–∏ 79 (–¥–µ–∫–∞–±—Ä—å 2019), –ø–æ–ª–Ω–æ—Å—Ç—å—é –¥–æ—Å—Ç—É–ø–Ω–æ –≤ 2023
- **Safari**: —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ –≤ Safari Technology Preview, –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å –≤ –ø—Ä–æ–¥–∞–∫—à–Ω-–≤–µ—Ä—Å–∏—è—Ö –≤ 2023
- **Firefox**: —Ä–∞–±–æ—Ç–∞ –Ω–∞–¥ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–µ–π –ø—Ä–æ–¥–æ–ª–∂–∞–ª–∞—Å—å –≤ 2023

**–ú–µ—Ö–∞–Ω–∏–∑–º —Ä–∞–±–æ—Ç—ã**:

–ï—Å–ª–∏ —Å–∞–π—Ç —É–∫–∞–∑—ã–≤–∞–µ—Ç –Ω–æ–≤—ã–µ –¥–∏—Ä–µ–∫—Ç–∏–≤—ã, CSP3-—Å–æ–≤–º–µ—Å—Ç–∏–º—ã–π –±—Ä–∞—É–∑–µ—Ä –∏–≥–Ω–æ—Ä–∏—Ä—É–µ—Ç –ª—é–±—É—é –¥–∏—Ä–µ–∫—Ç–∏–≤—É
`script-src` –≤ —ç—Ç–æ–π –ø–æ–ª–∏—Ç–∏–∫–µ. –ë—Ä–∞—É–∑–µ—Ä –±–µ–∑ —Ç–∞–∫–æ–π –ø–æ–¥–¥–µ—Ä–∂–∫–∏ –∏–≥–Ω–æ—Ä–∏—Ä—É–µ—Ç –Ω–µ–∏–∑–≤–µ—Å—Ç–Ω—ã–µ –¥–∏—Ä–µ–∫—Ç–∏–≤—ã –∏ –≤–º–µ—Å—Ç–æ
—ç—Ç–æ–≥–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `script-src`.

`script-src` —Å–ª—É–∂–∏—Ç fallback –¥–ª—è `script-src-elem` –∏ `script-src-attr`.

**–ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è**:

```http
Content-Security-Policy:
  default-src 'self';
  script-src-elem 'self' https://cdn.example.com;
  script-src-attr 'none';
  style-src-elem 'self';
  style-src-attr 'unsafe-inline'
```

–≠—Ç–∞ –ø–æ–ª–∏—Ç–∏–∫–∞ —Ä–∞–∑—Ä–µ—à–∞–µ—Ç:

- ‚úÖ –ó–∞–≥—Ä—É–∑–∫—É —Å–∫—Ä–∏–ø—Ç–æ–≤ —Ç–æ–ª—å–∫–æ —Å —Ç–æ–≥–æ –∂–µ origin –∏ —Å `cdn.example.com`
- ‚ùå –ü–æ–ª–Ω–æ—Å—Ç—å—é –∑–∞–ø—Ä–µ—â–∞–µ—Ç inline –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ —Å–æ–±—ã—Ç–∏–π (`onclick` –∏ —Ç.–¥.)
- ‚úÖ –†–∞–∑—Ä–µ—à–∞–µ—Ç —Å—Ç–∏–ª–∏ —Ç–æ–ª—å–∫–æ —Å —Ç–æ–≥–æ –∂–µ origin
- ‚úÖ –†–∞–∑—Ä–µ—à–∞–µ—Ç inline —Å—Ç–∏–ª–∏ –≤ –∞—Ç—Ä–∏–±—É—Ç–∞—Ö `style`

**Security implications**:

–ë–æ–ª–µ–µ –≥—Ä–∞–Ω—É–ª—è—Ä–Ω—ã–π –∫–æ–Ω—Ç—Ä–æ–ª—å –ø–æ–∑–≤–æ–ª—è–µ—Ç —Å–æ–∑–¥–∞–≤–∞—Ç—å –±–æ–ª–µ–µ —Å—Ç—Ä–æ–≥–∏–µ –ø–æ–ª–∏—Ç–∏–∫–∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏, —Ä–∞–∑–¥–µ–ª—è—è –ø—Ä–∞–≤–∏–ª–∞
–¥–ª—è —ç–ª–µ–º–µ–Ω—Ç–æ–≤ –∏ –∞—Ç—Ä–∏–±—É—Ç–æ–≤. –≠—Ç–æ –æ—Å–æ–±–µ–Ω–Ω–æ –ø–æ–ª–µ–∑–Ω–æ –¥–ª—è –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏—è XSS —á–µ—Ä–µ–∑ inline –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏
—Å–æ–±—ã—Ç–∏–π –ø—Ä–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–∏ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –≤–Ω–µ—à–Ω–∏—Ö —Å–∫—Ä–∏–ø—Ç–æ–≤.

**Baseline —Å—Ç–∞—Ç—É—Å**: –ù–µ –≤—Ö–æ–¥–∏—Ç –≤ Baseline (–æ–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞ –±—Ä–∞—É–∑–µ—Ä–∞–º–∏)

**–ò—Å—Ç–æ—á–Ω–∏–∫–∏**:

- https://www.w3.org/TR/CSP3/
- https://groups.google.com/a/mozilla.org/g/dev-platform/c/LlxUr3vIBWc
- https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Content-Security-Policy

### 3. Authentication ‚Äî WebAuthn Level 3 –∏ Passkeys

#### 3.1 WebAuthn Level 3

**–°–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏—è**: [W3C Web Authentication Level 3](https://www.w3.org/TR/webauthn-3/)

**First Public Working Draft**: 27 –∞–ø—Ä–µ–ª—è 2021 **–ê–∫—Ç–∏–≤–Ω–∞—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞ –≤ 2023**: –¥–∞

**–î–æ–±–∞–≤–ª–µ–Ω–∏—è –≤ Level 3**:

1. **Conditional Mediation (Conditional UI)** ‚Äî –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–µ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ passkeys –≤ autofill
2. **Cross-Origin Authentication within an iFrame** ‚Äî –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å WebAuthn –≤ iframe
3. **Credential Backup State** ‚Äî –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Ç–æ–º, backed up –ª–∏ credential
4. **isPasskeyPlatformAuthenticatorAvailable** method
5. **Pseudo-Random Function (PRF) extension** ‚Äî –¥–ª—è end-to-end encryption
6. **Hybrid Transport** ‚Äî –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Ç–µ–ª–µ—Ñ–æ–Ω–∞ –∫–∞–∫ authenticator
7. **Third-Party Payment Authentication**

**–ò—Å—Ç–æ—á–Ω–∏–∫–∏**:

- https://www.w3.org/TR/webauthn-3/
- https://github.com/w3c/webauthn/wiki/Explainer:-WebAuthn-Conditional-UI

#### 3.2 Conditional UI (Autofill UI)

**–û–ø–∏—Å–∞–Ω–∏–µ**:

Conditional UI ‚Äî —ç—Ç–æ feature –≤ WebAuthn, –∫–æ—Ç–æ—Ä—ã–π –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç passkeys –∏–ª–∏ —Ç—Ä–∞–¥–∏—Ü–∏–æ–Ω–Ω—ã–µ
password options –Ω–∞ –æ—Å–Ω–æ–≤–µ —Ç–æ–≥–æ, –µ—Å—Ç—å –ª–∏ —É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–π credential (resident key)
—Å –≤–µ–±-—Å–∞–π—Ç–æ–º –∏–ª–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ–º.

Credential selection UI –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∏–º–µ–µ—Ç discoverable credential,
–∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Å Relying Party –Ω–∞ –∏—Ö authenticator, –ø—Ä–∏ —ç—Ç–æ–º credential –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –≤–º–µ—Å—Ç–µ —Å
autofilled passwords.

**Browser support (2023)**:

- **Chrome**: 108+ (–ø–æ–¥–¥–µ—Ä–∂–∫–∞ passkeys —Å autofill suggestions)
- **Safari**: —Å –æ–∫—Ç—è–±—Ä—è 2023
- **Firefox**: progressive support –≤ 2023
- **Edge**: —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞–Ω–æ —Å Chrome

**–°—Ç–∞—Ç—É—Å**: –° –æ–∫—Ç—è–±—Ä—è 2023 —ç—Ç–∞ —Ñ—É–Ω–∫—Ü–∏—è —Ä–∞–±–æ—Ç–∞–µ—Ç across the latest devices and browser versions.

**API –ø—Ä–∏–º–µ—Ä**:

```javascript
// –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ Conditional UI
const available = await PublicKeyCredential.isConditionalMediationAvailable();
console.log('Conditional UI available:', available);

if (available) {
    // –ó–∞–ø—Ä–æ—Å credential —Å conditional UI
    const credential = await navigator.credentials.get({
        publicKey: {
            challenge: new Uint8Array([
                /* random challenge */
            ]),
            rpId: 'example.com',
            userVerification: 'preferred',
            // –ù–ï —É–∫–∞–∑—ã–≤–∞–µ–º allowCredentials –¥–ª—è discoverable credentials
        },
        mediation: 'conditional', // –ö–ª—é—á–µ–≤–æ–π –ø–∞—Ä–∞–º–µ—Ç—Ä
    });

    if (credential) {
        console.log('User authenticated with passkey:', credential);
        // –û—Ç–ø—Ä–∞–≤–∏—Ç—å credential –Ω–∞ —Å–µ—Ä–≤–µ—Ä –¥–ª—è verification
        await verifyCredential(credential);
    }
}
```

**HTML integration**:

```html
<form id="login-form">
    <label for="username">Email:</label>
    <input
        type="text"
        id="username"
        name="username"
        autocomplete="username webauthn"
        placeholder="Email or passkey"
    />

    <label for="password">Password:</label>
    <input type="password" id="password" name="password" autocomplete="current-password" />

    <button type="submit">Sign In</button>
</form>
```

–ë—Ä–∞—É–∑–µ—Ä –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ—Ç–æ–±—Ä–∞–∑–∏—Ç passkeys –≤ autofill UI –ø—Ä–∏ —Ñ–æ–∫—É—Å–µ –Ω–∞ –ø–æ–ª–µ `username`.

**Security implications**:

Conditional UI –∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω–æ —É–ª—É—á—à–∞–µ—Ç UX –¥–ª—è passwordless authentication, –¥–µ–ª–∞—è passkeys –±–æ–ª–µ–µ
accessible –∏ convenient, —á—Ç–æ –≤–µ–¥—ë—Ç –∫ –±–æ–ª—å—à–µ–º—É adoption.

**Baseline —Å—Ç–∞—Ç—É—Å**: Approaching Baseline (—Å –æ–∫—Ç—è–±—Ä—è 2023)

**–ò—Å—Ç–æ—á–Ω–∏–∫–∏**:

- https://github.com/w3c/webauthn/wiki/Explainer:-WebAuthn-Conditional-UI
- https://www.corbado.com/glossary/conditional-ui
- https://developer.chrome.com/docs/identity/webauthn-conditional-ui

#### 3.3 Passkeys

**–û–ø–∏—Å–∞–Ω–∏–µ**:

Passkeys ‚Äî —ç—Ç–æ marketing term, –ø–æ–ø—É–ª—è—Ä–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π Google –∏ Apple, –æ—Ç–Ω–æ—Å–∏—Ç—Å—è –∫ Multi-Device FIDO
Credentials, —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–º —Å WebAuthn specification.

Passkeys –±–æ–ª–µ–µ –±–µ–∑–æ–ø–∞—Å–Ω—ã, —á–µ–º passwords, –ø–æ—Ç–æ–º—É —á—Ç–æ –æ–Ω–∏ –ø–æ–∑–≤–æ–ª—è—é—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º sign in —Å biometric
sensor (–æ—Ç–ø–µ—á–∞—Ç–æ–∫ –ø–∞–ª—å—Ü–∞, facial recognition), PIN –∏–ª–∏ pattern, –æ—Å–≤–æ–±–æ–∂–¥–∞—è –æ—Ç –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏
–∑–∞–ø–æ–º–∏–Ω–∞—Ç—å –∏ —É–ø—Ä–∞–≤–ª—è—Ç—å passwords.

**Security features**:

1. **Phishing Resistance**: attackers –Ω–µ –º–æ–≥—É—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å passkey –Ω–∞ —Ñ–∞–ª—å—à–∏–≤–æ–º —Å–∞–π—Ç–µ, —Ç–∞–∫ –∫–∞–∫
   signature –º–µ–Ω—è–µ—Ç—Å—è —Å origin —Å–∞–π—Ç–∞
2. **Data Breach Protection**: –ø—Ä–∏ —É—Ç–µ—á–∫–µ –¥–∞–Ω–Ω—ã—Ö attacker –ø–æ–ª—É—á–∞–µ—Ç —Ç–æ–ª—å–∫–æ public key, –∫–æ—Ç–æ—Ä—ã–π
   –±–µ—Å–ø–æ–ª–µ–∑–µ–Ω
3. **Credential Isolation**: passkey —É–Ω–∏–∫–∞–ª–µ–Ω –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Å–µ—Ä–≤–∏—Å–∞

**Browser support (2023)**:

- **Chrome**: 108+ (–∫–æ–Ω–µ—Ü 2022/–Ω–∞—á–∞–ª–æ 2023)
- **Safari**: iOS 16+, macOS Ventura+ (2022/2023)
- **Firefox**: progressive support –≤ 2023
- **Edge**: —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞–Ω–æ —Å Chrome

**Platform support**:

- **Android**: 2023
- **iOS/iPadOS**: iOS 16+ (2022/2023)
- **Windows**: Windows 11 (2023)
- **macOS**: macOS Ventura+ (2022/2023)

**iCloud Keychain sync**: passkeys —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É—é—Ç—Å—è across Apple devices

**Google Password Manager**: passkeys —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É—é—Ç—Å—è across Android devices –∏ Chrome

**–ü—Ä–∏–º–µ—Ä —Å–æ–∑–¥–∞–Ω–∏—è passkey**:

```javascript
// === Registration ===
async function registerPasskey(username, displayName) {
    try {
        // –ó–∞–ø—Ä–æ—Å challenge —Å —Å–µ—Ä–≤–µ—Ä–∞
        const challengeResponse = await fetch('/api/webauthn/register/begin', {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify({ username }),
        });
        const challengeData = await challengeResponse.json();

        // –°–æ–∑–¥–∞—Ç—å passkey
        const credential = await navigator.credentials.create({
            publicKey: {
                challenge: base64ToArrayBuffer(challengeData.challenge),
                rp: {
                    name: 'Example Corp',
                    id: 'example.com',
                },
                user: {
                    id: base64ToArrayBuffer(challengeData.userId),
                    name: username,
                    displayName: displayName,
                },
                pubKeyCredParams: [
                    { type: 'public-key', alg: -7 }, // ES256
                    { type: 'public-key', alg: -257 }, // RS256
                ],
                authenticatorSelection: {
                    authenticatorAttachment: 'platform', // –í—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π authenticator (Touch ID, Face ID, Windows Hello)
                    residentKey: 'required', // –ö—Ä–∏—Ç–∏—á–Ω–æ –¥–ª—è passkeys
                    userVerification: 'required',
                },
                timeout: 60000,
                attestation: 'none',
            },
        });

        // –û—Ç–ø—Ä–∞–≤–∏—Ç—å credential –Ω–∞ —Å–µ—Ä–≤–µ—Ä
        const registrationResponse = await fetch('/api/webauthn/register/finish', {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify({
                id: credential.id,
                rawId: arrayBufferToBase64(credential.rawId),
                response: {
                    clientDataJSON: arrayBufferToBase64(credential.response.clientDataJSON),
                    attestationObject: arrayBufferToBase64(credential.response.attestationObject),
                },
                type: credential.type,
            }),
        });

        console.log('‚úÖ Passkey registered successfully');
    } catch (error) {
        console.error('‚ùå Passkey registration failed:', error);
    }
}

// === Authentication ===
async function authenticateWithPasskey(username) {
    try {
        // –ó–∞–ø—Ä–æ—Å challenge —Å —Å–µ—Ä–≤–µ—Ä–∞
        const challengeResponse = await fetch('/api/webauthn/authenticate/begin', {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify({ username }),
        });
        const challengeData = await challengeResponse.json();

        // –ü–æ–ª—É—á–∏—Ç—å credential
        const credential = await navigator.credentials.get({
            publicKey: {
                challenge: base64ToArrayBuffer(challengeData.challenge),
                rpId: 'example.com',
                allowCredentials: challengeData.allowCredentials.map((cred) => ({
                    type: 'public-key',
                    id: base64ToArrayBuffer(cred.id),
                })),
                userVerification: 'required',
                timeout: 60000,
            },
        });

        // –û—Ç–ø—Ä–∞–≤–∏—Ç—å credential –Ω–∞ —Å–µ—Ä–≤–µ—Ä –¥–ª—è verification
        const authResponse = await fetch('/api/webauthn/authenticate/finish', {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify({
                id: credential.id,
                rawId: arrayBufferToBase64(credential.rawId),
                response: {
                    clientDataJSON: arrayBufferToBase64(credential.response.clientDataJSON),
                    authenticatorData: arrayBufferToBase64(credential.response.authenticatorData),
                    signature: arrayBufferToBase64(credential.response.signature),
                    userHandle: arrayBufferToBase64(credential.response.userHandle),
                },
                type: credential.type,
            }),
        });

        const authResult = await authResponse.json();
        if (authResult.success) {
            console.log('‚úÖ Authenticated successfully');
            // Redirect to dashboard
            window.location.href = '/dashboard';
        }
    } catch (error) {
        console.error('‚ùå Authentication failed:', error);
    }
}

// Utility functions
function base64ToArrayBuffer(base64) {
    const binaryString = atob(base64);
    const bytes = new Uint8Array(binaryString.length);
    for (let i = 0; i < binaryString.length; i++) {
        bytes[i] = binaryString.charCodeAt(i);
    }
    return bytes.buffer;
}

function arrayBufferToBase64(buffer) {
    const bytes = new Uint8Array(buffer);
    let binary = '';
    for (let i = 0; i < bytes.byteLength; i++) {
        binary += String.fromCharCode(bytes[i]);
    }
    return btoa(binary);
}
```

**Security implications**:

Passkeys –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è—é—Ç major shift –æ—Ç passwords –∫ phishing-resistant, user-friendly authentication.
2023 –≥–æ–¥ ‚Äî –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–π –≥–æ–¥ –¥–ª—è adoption passkeys across major platforms.

**Baseline —Å—Ç–∞—Ç—É—Å**: Rapidly approaching Baseline (2023-2024)

**–ò—Å—Ç–æ—á–Ω–∏–∫–∏**:

- https://www.passkeys.com/what-is-webauthn
- https://www.aboutchromebooks.com/passkeys-on-chromebooks-2023

### 4. Cookies –∏ Privacy

#### 4.1 SameSite cookies ‚Äî Lax default (—Å—Ç–∞—Ç—É—Å 2023)

**–û–ø–∏—Å–∞–Ω–∏–µ**:

`SameSite` cookie attribute –∑–∞—â–∏—â–∞–µ—Ç –æ—Ç CSRF –∞—Ç–∞–∫, –æ–≥—Ä–∞–Ω–∏—á–∏–≤–∞—è –æ—Ç–ø—Ä–∞–≤–∫—É cookies –≤ cross-site
–∫–æ–Ω—Ç–µ–∫—Å—Ç–µ.

**–ó–Ω–∞—á–µ–Ω–∏—è**:

- `SameSite=Strict` ‚Äî cookie –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –¥–ª—è same-site requests
- `SameSite=Lax` ‚Äî cookie –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –¥–ª—è top-level navigations –∏ same-site requests
- `SameSite=None` ‚Äî cookie –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –¥–ª—è –≤—Å–µ—Ö requests (—Ç—Ä–µ–±—É–µ—Ç `Secure` attribute)

**Browser defaults (2023)**:

–ï—Å–ª–∏ cookie —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è –±–µ–∑ —è–≤–Ω–æ–≥–æ `SameSite` attribute:

- **Chrome, Edge, Opera**: –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é `SameSite=Lax` (—Å 2021, Chrome 80+)
- **Firefox**: –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é `SameSite=Lax`
- **Safari –∏ WebKit-based browsers**: –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é `SameSite=None` (–º–µ–Ω–µ–µ –æ–≥—Ä–∞–Ω–∏—á–∏—Ç–µ–ª—å–Ω–æ)

**Security implications**:

Lax default –∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω–æ –ø–æ–≤—ã—à–∞–µ—Ç –∑–∞—â–∏—Ç—É –æ—Ç CSRF –∞—Ç–∞–∫ –±–µ–∑ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ —è–≤–Ω—ã—Ö –¥–µ–π—Å—Ç–≤–∏–π —Å–æ —Å—Ç–æ—Ä–æ–Ω—ã
—Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤.

–û–¥–Ω–∞–∫–æ inconsistency –º–µ–∂–¥—É –±—Ä–∞—É–∑–µ—Ä–∞–º–∏ –æ–∑–Ω–∞—á–∞–µ—Ç, —á—Ç–æ —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∏ –¥–æ–ª–∂–Ω—ã —è–≤–Ω–æ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—Ç—å
`SameSite` attribute –¥–ª—è –ø—Ä–µ–¥—Å–∫–∞–∑—É–µ–º–æ–≥–æ –ø–æ–≤–µ–¥–µ–Ω–∏—è.

**Migration guidance**:

```http
# –î–æ (—É—Å—Ç–∞—Ä–µ–≤—à–∏–π –ø–æ–¥—Ö–æ–¥)
Set-Cookie: session=abc123; Secure; HttpOnly

# –ü–æ—Å–ª–µ (—è–≤–Ω–æ–µ —É–∫–∞–∑–∞–Ω–∏–µ –¥–ª—è cross-browser consistency)
Set-Cookie: session=abc123; Secure; HttpOnly; SameSite=Lax

# –î–ª—è cookies, –∫–æ—Ç–æ—Ä—ã–º –Ω—É–∂–Ω–∞ cross-site functionality
Set-Cookie: tracking=xyz; Secure; SameSite=None
```

**Baseline —Å—Ç–∞—Ç—É—Å**: Widely available (–Ω–æ —Å —Ä–∞–∑–ª–∏—á–∏—è–º–∏ –≤ defaults –º–µ–∂–¥—É –±—Ä–∞—É–∑–µ—Ä–∞–º–∏)

**–ò—Å—Ç–æ—á–Ω–∏–∫–∏**:

- https://web.dev/articles/samesite-cookies-explained
- https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Set-Cookie
- https://stackoverflow.com/questions/59990864/what-is-the-difference-between-samesite-lax-and-samesite-strict

#### 4.2 Third-party cookies deprecation timeline

**Chrome announcement (–º–∞–π 2023)**: Privacy Sandbox –≥–æ—Ç–æ–≤, Chrome –ø–ª–∞–Ω–∏—Ä—É–µ—Ç –æ—Ç–∫–∞–∑–∞—Ç—å—Å—è –æ—Ç
third-party cookies –≤ 2024 –≥–æ–¥—É.

**Firefox (2023)**: Total Cookie Protection –≤ Enhanced Tracking Protection's Strict Mode (–¥–æ–±–∞–≤–ª–µ–Ω–æ
–≤ Firefox 111, –º–∞—Ä—Ç 2023).

Total Cookie Protection –∏–∑–æ–ª–∏—Ä—É–µ—Ç cookies –ø–æ first-party context, —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ –ø–∞—Ä—Ç–∏—Ü–∏–æ–Ω–∏—Ä—É—è –∏—Ö
–∞–Ω–∞–ª–æ–≥–∏—á–Ω–æ CHIPS.

**Safari**: –ø—Ä–æ–¥–æ–ª–∂–µ–Ω–∏–µ Intelligent Tracking Prevention (ITP), –±–ª–æ–∫–∏—Ä—É—é—â–µ–≥–æ third-party tracking
cookies –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é —Å –ø—Ä–µ–¥—ã–¥—É—â–∏—Ö –ª–µ—Ç.

**Security implications**:

2023 –≥–æ–¥ ‚Äî –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–π –≥–æ–¥ –¥–ª—è –ø–µ—Ä–µ—Ö–æ–¥–∞ –≤–µ–±-–∏–Ω–¥—É—Å—Ç—Ä–∏–∏ –æ—Ç third-party cookies –∫ privacy-preserving
–∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞–º.

**Baseline —Å—Ç–∞—Ç—É—Å**: –ü—Ä–æ—Ü–µ—Å—Å –≤ —Å—Ç–∞–¥–∏–∏ –ø–µ—Ä–µ—Ö–æ–¥–∞

**–ò—Å—Ç–æ—á–Ω–∏–∫–∏**:

- https://www.ghacks.net/2023/05/18/googles-privacy-sandbox-is-ready-chrome-to-drop-third-party-cookies-in-2024/
- https://developer.mozilla.org/en-US/blog/goodbye-third-party-cookies/

### 5. Deprecations –∏ Removals (2023)

#### 5.1 document.domain setter (Chrome 115)

**–°—Ç–∞—Ç—É—Å**: deprecated –∏ made immutable –≤ Chrome 115 (–∏—é–ª—å 2023)

**–ß—Ç–æ –∏–∑–º–µ–Ω–∏–ª–æ—Å—å**:

–ù–∞—á–∏–Ω–∞—è —Å Chrome 115, –≤–µ–±-—Å–∞–π—Ç—ã –Ω–µ –º–æ–≥—É—Ç —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—Ç—å `document.domain`. Chrome —Å–¥–µ–ª–∞–ª
`document.domain` immutable.

Deprecation –æ—Ç–∫–ª—é—á–∏–ª –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å relaxing same-origin policy –ø—É—Ç—ë–º —É—Å—Ç–∞–Ω–æ–≤–∫–∏ `document.domain` –ø–æ
—É–º–æ–ª—á–∞–Ω–∏—é –≤ Chrome 115.

**Impact**:

–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ `document.domain` setter –Ω–µ –±—Ä–æ—Å–∞–µ—Ç exception, –Ω–æ –ø–µ—Ä–µ—Å—Ç–∞—ë—Ç –∏–º–µ—Ç—å —ç—Ñ—Ñ–µ–∫—Ç. –ò–∑–º–µ–Ω–µ–Ω–∏–µ
–±—ã–ª–æ rolled out –ø—Ä–æ–≥—Ä–µ—Å—Å–∏–≤–Ω–æ, –Ω–∞—á–∏–Ω–∞—è —Å Chrome 115.

**Migration guidance**:

–î–ª—è cross-origin communication –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å:

- `postMessage()`
- `Channel Messaging API`

**–ü—Ä–∏–º–µ—Ä –º–∏–≥—Ä–∞—Ü–∏–∏**:

```javascript
// === –°—Ç–∞—Ä—ã–π –ø–æ–¥—Ö–æ–¥ (deprecated) ===
// –ù–∞ https://app.example.com
document.domain = 'example.com';
// –ù–∞ https://api.example.com
document.domain = 'example.com';
// –¢–µ–ø–µ—Ä—å –º–æ–≥—É—Ç –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–æ–≤–∞—Ç—å –Ω–∞–ø—Ä—è–º—É—é

// === –ù–æ–≤—ã–π –ø–æ–¥—Ö–æ–¥ (postMessage) ===
// –ù–∞ https://app.example.com
const iframe = document.getElementById('api-iframe');
iframe.contentWindow.postMessage({ action: 'getData', id: 123 }, 'https://api.example.com');

window.addEventListener('message', (event) => {
    if (event.origin !== 'https://api.example.com') return;

    console.log('Received data:', event.data);
});

// –ù–∞ https://api.example.com (–≤ iframe)
window.addEventListener('message', (event) => {
    if (event.origin !== 'https://app.example.com') return;

    if (event.data.action === 'getData') {
        const data = fetchData(event.data.id);
        event.source.postMessage({ data }, event.origin);
    }
});
```

–î–ª—è –ø—Ä–æ–¥–æ–ª–∂–µ–Ω–∏—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è —Å—Ç–∞—Ä–æ–≥–æ –ø–æ–≤–µ–¥–µ–Ω–∏—è (–≤—Ä–µ–º–µ–Ω–Ω–æ):

```http
Origin-Agent-Cluster: ?0
```

–≠—Ç–æ—Ç –∑–∞–≥–æ–ª–æ–≤–æ–∫ –ø–æ–∑–≤–æ–ª—è–µ—Ç opt out –∏–∑ origin-keyed agent clusters.

**Security implications**:

–ö—Ä–∏—Ç–∏—á–µ—Å–∫–æ–µ security improvement. `document.domain` setter –ø–æ–∑–≤–æ–ª—è–ª –æ–±—Ö–æ–¥–∏—Ç—å same-origin policy, —á—Ç–æ
—Å–æ–∑–¥–∞–≤–∞–ª–æ security risks.

**Browser support (2023)**:

- **Chrome**: 115+ (–∏—é–ª—å 2023)
- **Firefox**: –Ω–µ deprecated –≤ 2023
- **Safari**: –Ω–µ deprecated –≤ 2023

**–ò—Å—Ç–æ—á–Ω–∏–∫–∏**:

- https://developer.chrome.com/blog/immutable-document-domain
- https://developer.chrome.com/blog/document-domain-setter-deprecation
- https://chromestatus.com/feature/5428079583297536

#### 5.2 Web SQL Database (Chrome 119)

**–°—Ç–∞—Ç—É—Å**: –ø–æ–ª–Ω–æ—Å—Ç—å—é —É–¥–∞–ª—ë–Ω –≤ Chrome 119 (30 –æ–∫—Ç—è–±—Ä—è 2023)

**Timeline**:

- **Chromium 97**: —É–¥–∞–ª—ë–Ω –¥–ª—è third-party contexts
- **Chromium 105**: deprecated –≤ insecure contexts, –ø–æ–∫–∞–∑—ã–≤–∞–ª–æ—Å—å –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ –≤ DevTools Issue
  panel
- **Chromium 110**: —É–¥–∞–ª—ë–Ω –≤ insecure contexts
- **Chrome 119**: –ø–æ–ª–Ω–æ—Å—Ç—å—é —É–¥–∞–ª—ë–Ω –≤–æ –≤—Å–µ—Ö –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞—Ö ‚≠ê

**Deprecation trial**: reverse origin trial –ø–æ–∑–≤–æ–ª—è–µ—Ç —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞–º –ø—Ä–æ–¥–æ–ª–∂–∞—Ç—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å WebSQL
–¥–æ Chrome 123, –¥–∞–≤–∞—è –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–µ –≤—Ä–µ–º—è –¥–ª—è –º–∏–≥—Ä–∞—Ü–∏–∏.

**Background**:

Web SQL Database API, –ø–æ–∑–≤–æ–ª—è—é—â–∏–π —Ö—Ä–∞–Ω–∏—Ç—å –¥–∞–Ω–Ω—ã–µ –≤ structured manner –Ω–∞ –∫–æ–º–ø—å—é—Ç–µ—Ä–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
(–≤–Ω—É—Ç—Ä–µ–Ω–Ω–µ –æ—Å–Ω–æ–≤–∞–Ω –Ω–∞ SQLite database engine), –±—ã–ª –≤–≤–µ–¥—ë–Ω –≤ –∞–ø—Ä–µ–ª–µ 2009 –∏ abandoned –≤ –Ω–æ—è–±—Ä–µ 2010.

**Migration guidance**:

W3C —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç —Ç–µ–º, –∫—Ç–æ –Ω—É–∂–¥–∞–µ—Ç—Å—è –≤ web databases, –ø—Ä–∏–Ω—è—Ç—å Web Storage API —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏:

- `localStorage` –∏ `sessionStorage`
- **IndexedDB** (–æ—Å–Ω–æ–≤–Ω–∞—è —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è)

**–ü—Ä–∏–º–µ—Ä –º–∏–≥—Ä–∞—Ü–∏–∏**:

```javascript
// === –°—Ç–∞—Ä—ã–π –∫–æ–¥ (Web SQL) ===
const db = openDatabase('mydb', '1.0', 'My Database', 2 * 1024 * 1024);

db.transaction((tx) => {
    tx.executeSql(
        'CREATE TABLE IF NOT EXISTS users (id INTEGER PRIMARY KEY, name TEXT, email TEXT)',
    );
    tx.executeSql('INSERT INTO users (name, email) VALUES (?, ?)', [
        'John Doe',
        'john@example.com',
    ]);
    tx.executeSql('SELECT * FROM users', [], (tx, results) => {
        for (let i = 0; i < results.rows.length; i++) {
            console.log(results.rows.item(i));
        }
    });
});

// === –ù–æ–≤—ã–π –∫–æ–¥ (IndexedDB) ===
const request = indexedDB.open('mydb', 1);

request.onupgradeneeded = (event) => {
    const db = event.target.result;

    if (!db.objectStoreNames.contains('users')) {
        const objectStore = db.createObjectStore('users', { keyPath: 'id', autoIncrement: true });
        objectStore.createIndex('name', 'name', { unique: false });
        objectStore.createIndex('email', 'email', { unique: true });
    }
};

request.onsuccess = (event) => {
    const db = event.target.result;

    // –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö
    const transaction = db.transaction(['users'], 'readwrite');
    const objectStore = transaction.objectStore('users');

    objectStore.add({ name: 'John Doe', email: 'john@example.com' });

    // –ß—Ç–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö
    const getAllRequest = objectStore.getAll();
    getAllRequest.onsuccess = () => {
        const users = getAllRequest.result;
        users.forEach((user) => console.log(user));
    };
};
```

**Security implications**:

Web SQL —É–¥–∞–ª—ë–Ω —á–∞—Å—Ç–∏—á–Ω–æ –∏–∑-–∑–∞ security concerns –∏ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏—è standardization. IndexedDB
–ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –±–æ–ª–µ–µ –±–µ–∑–æ–ø–∞—Å–Ω—É—é –∏ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—É—é –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤—É.

**Browser support (2023)**:

- **Chrome**: —É–¥–∞–ª—ë–Ω –≤ 119
- **Firefox**: –Ω–∏–∫–æ–≥–¥–∞ –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–ª
- **Safari**: –≤—Å—ë –µ—â—ë –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –≤ 2023 (deprecated)
- **Edge**: —É–¥–∞–ª—ë–Ω –≤ 119 (—Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞–Ω–æ —Å Chrome)

**–ò—Å—Ç–æ—á–Ω–∏–∫–∏**:

- https://developer.chrome.com/blog/deprecating-web-sql
- https://groups.google.com/a/chromium.org/g/blink-dev/c/fWYb6evVA-w/m/pziWcvboAgAJ
- https://developer.chrome.com/en/blog/web-sql-deprecation-timeline-updated

### 6. Browser-specific Security Features (2023)

#### 6.1 Firefox

##### Total Cookie Protection –≤ Strict Mode (Firefox 111)

**–û–ø–∏—Å–∞–Ω–∏–µ**: –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ Total Cookie Protection –∫ Enhanced Tracking Protection's Strict Mode.

Total Cookie Protection –∏–∑–æ–ª–∏—Ä—É–µ—Ç cookies –ø–æ first-party context, —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ –ø–∞—Ä—Ç–∏—Ü–∏–æ–Ω–∏—Ä—É—è –∏—Ö.

**Browser support**: Firefox 111+ (–º–∞—Ä—Ç 2023)

**Security implications**: –∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω–æ–µ —É–ª—É—á—à–µ–Ω–∏–µ privacy, –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞—é—â–µ–µ cross-site tracking —á–µ—Ä–µ–∑
cookies.

**–ò—Å—Ç–æ—á–Ω–∏–∫–∏**:

- https://www.ghacks.net/2023/03/14/find-out-what-is-new-in-firefox-111/

##### GPU Sandboxing –Ω–∞ Windows (Firefox 110)

**–û–ø–∏—Å–∞–Ω–∏–µ**: –ø–æ–¥–¥–µ—Ä–∂–∫–∞ GPU "sandboxing" –Ω–∞ Windows.

**Browser support**: Firefox 110+ (—Ñ–µ–≤—Ä–∞–ª—å 2023)

**Security implications**: –∏–∑–æ–ª—è—Ü–∏—è GPU –ø—Ä–æ—Ü–µ—Å—Å–æ–≤ –¥–ª—è –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏—è privilege escalation –∏ –¥—Ä—É–≥–∏—Ö
attacks —á–µ—Ä–µ–∑ GPU drivers.

#### 6.2 Safari

##### Enhanced Private Browsing (Safari 17)

**–û–ø–∏—Å–∞–Ω–∏–µ**: Safari 17 –≤–≤–æ–¥–∏—Ç Face ID‚Äìlocked Private Browsing, default blocking tracking –≤ private
mode, link-tracking removal –∏ separate private-mode search engine settings.

**–§—É–Ω–∫—Ü–∏–∏**:

- **Face ID/Touch ID Lock**: Private Browsing windows –±–ª–æ–∫–∏—Ä—É—é—Ç—Å—è, –∫–æ–≥–¥–∞ –Ω–µ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è
- **Default Tracker Blocking**: known trackers –ø–æ–ª–Ω–æ—Å—Ç—å—é –±–ª–æ–∫–∏—Ä—É—é—Ç—Å—è –æ—Ç –∑–∞–≥—Ä—É–∑–∫–∏ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
- **Link Tracking Protection**: —É–¥–∞–ª–µ–Ω–∏–µ tracking parameters –∏–∑ URLs

**–ü—Ä–∏–º–µ—Ä Link Tracking Protection**:

```
–ò—Å—Ö–æ–¥–Ω—ã–π URL:
https://example.com/page?utm_source=newsletter&utm_campaign=2023&fbclid=abc123

–ü–æ—Å–ª–µ –æ–±—Ä–∞–±–æ—Ç–∫–∏ Safari:
https://example.com/page
```

**Browser support**: Safari 17+ (—Å–µ–Ω—Ç—è–±—Ä—å 2023)

**Security implications**: –∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω–æ–µ —É–ª—É—á—à–µ–Ω–∏–µ privacy –≤ Private Browsing mode.

**–ò—Å—Ç–æ—á–Ω–∏–∫–∏**:

- https://webkit.org/blog/14205/news-from-wwdc23-webkit-features-in-safari-17-beta/
- https://www.loophorizon.com/blog/will-safari-17-impact-your-marketing

##### WebKit Architecture Improvements (Safari 17)

**–û–ø–∏—Å–∞–Ω–∏–µ**: –Ω–æ–≤–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –ø–æ–∑–≤–æ–ª—è–µ—Ç WebKit –∏–∑–æ–ª–∏—Ä–æ–≤–∞—Ç—å powerful graphics hardware –∏ driver
access –æ—Ç WebContent process (–∫–æ—Ç–æ—Ä—ã–π –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤—É–µ—Ç —Å untrusted content –∏–∑ Internet).

–ù–æ–≤—ã–π –¥–∏–∑–∞–π–Ω —Ç–∞–∫–∂–µ –ø–æ–∑–≤–æ–ª—è–µ—Ç WebContent process sandbox –ø–æ–ª–Ω–æ—Å—Ç—å—é –±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å IOKit access.

**Security implications**: –∫—Ä–∏—Ç–∏—á–µ—Å–∫–æ–µ —É–ª—É—á—à–µ–Ω–∏–µ security —á–µ—Ä–µ–∑ process isolation. Graphics exploits
‚Äî —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω—ë–Ω–Ω—ã–π attack vector, –∏–∑–æ–ª—è—Ü–∏—è —Å–Ω–∏–∂–∞–µ—Ç risk.

**Browser support**: Safari 17+ (—Å–µ–Ω—Ç—è–±—Ä—å 2023)

**–ò—Å—Ç–æ—á–Ω–∏–∫–∏**:

- https://webkit.org/blog/14445/webkit-features-in-safari-17-0/

## Baseline 2023 ‚Äî HTTP/Networking/Security Features

### Baseline Newly Available –≤ 2023

–°–ª–µ–¥—É—é—â–∏–µ features –¥–æ—Å—Ç–∏–≥–ª–∏ **Baseline Newly available** —Å—Ç–∞—Ç—É—Å–∞ –≤ 2023:

#### Fetch Metadata Headers (–º–∞—Ä—Ç 2023)

- Safari 16.4 –¥–æ–±–∞–≤–∏–ª –ø–æ–¥–¥–µ—Ä–∂–∫—É 27 –º–∞—Ä—Ç–∞ 2023
- –ö—Ä–æ—Å—Å–±—Ä–∞—É–∑–µ—Ä–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å –¥–æ—Å—Ç–∏–≥–Ω—É—Ç–∞
- **–°—Ç–∞—Ç—É—Å**: Newly Available (–º–∞—Ä—Ç 2023)

#### Import Maps (–º–∞—Ä—Ç 2023)

- Safari 16.4 –∏ Firefox 109 –∑–∞–≤–µ—Ä—à–∏–ª–∏ –∫—Ä–æ—Å—Å–±—Ä–∞—É–∑–µ—Ä–Ω—É—é –ø–æ–¥–¥–µ—Ä–∂–∫—É
- **–°—Ç–∞—Ç—É—Å**: Newly Available (–º–∞—Ä—Ç 2023)

#### Modulepreload (—Å–µ–Ω—Ç—è–±—Ä—å 2023)

- Safari 17 –∏ Firefox 115 –∑–∞–≤–µ—Ä—à–∏–ª–∏ –ø–æ–¥–¥–µ—Ä–∂–∫—É
- **–°—Ç–∞—Ç—É—Å**: Newly Available (—Å–µ–Ω—Ç—è–±—Ä—å 2023)

#### iframe loading="lazy" (–¥–µ–∫–∞–±—Ä—å 2023)

- Firefox 121 –¥–æ–±–∞–≤–∏–ª –ø–æ–¥–¥–µ—Ä–∂–∫—É
- **–°—Ç–∞—Ç—É—Å**: Newly Available (–¥–µ–∫–∞–±—Ä—å 2023)

### Features –í –ü—Ä–æ—Ü–µ—Å—Å–µ (–Ω–µ Baseline –≤ 2023)

- **Speculation Rules API**: —Ç–æ–ª—å–∫–æ Chrome
- **Service Worker Static Routing**: origin trial
- **WebTransport**: Chrome –∏ Firefox, –Ω–æ –Ω–µ Safari
- **CHIPS**: —Ç–æ–ª—å–∫–æ Chrome
- **Priority Hints**: —Ç–æ–ª—å–∫–æ Chrome/Edge
- **Private Network Access**: —Ç–æ–ª—å–∫–æ Chrome
- **Privacy Sandbox APIs**: —Ç–æ–ª—å–∫–æ Chrome

## Browser Support Summary 2023

| Feature                       | Chrome  | Firefox        | Safari        | Baseline                       |
| ----------------------------- | ------- | -------------- | ------------- | ------------------------------ |
| **HTTP/3**                    | ‚úÖ 109+ | ‚úÖ 109+        | ‚ö†Ô∏è 16+        | ‚úÖ Widely Available            |
| **CHIPS**                     | ‚úÖ 114+ | ‚ùå             | ‚ùå            | ‚ùå                             |
| **Privacy Sandbox APIs**      | ‚úÖ 115+ | ‚ùå             | ‚ùå            | ‚ùå                             |
| **Fetch Metadata**            | ‚úÖ 80+  | ‚úÖ 90+         | ‚úÖ 16.4+      | ‚úÖ Newly Available (–º–∞—Ä—Ç 2023) |
| **Import Maps**               | ‚úÖ 89+  | ‚úÖ 109+        | ‚úÖ 16.4+      | ‚úÖ Newly Available (–º–∞—Ä—Ç 2023) |
| **Modulepreload**             | ‚úÖ 66+  | ‚úÖ 115+        | ‚úÖ 17.0+      | ‚úÖ Newly Available (—Å–µ–Ω—Ç 2023) |
| **WebTransport**              | ‚úÖ 97+  | ‚úÖ 114+        | ‚ùå            | ‚ùå                             |
| **COEP credentialless**       | ‚úÖ 96+  | ‚úÖ 119+        | ‚ùå            | ‚ùå                             |
| **Private Network Access**    | ‚úÖ 117+ | ‚ùå             | ‚ùå            | ‚ùå                             |
| **document.domain immutable** | ‚úÖ 115+ | ‚ùå             | ‚ùå            | ‚ùå                             |
| **Web SQL removed**           | ‚úÖ 119+ | N/A            | ‚ö†Ô∏è Deprecated | ‚ùå                             |
| **WebAuthn Conditional UI**   | ‚úÖ 108+ | ‚úÖ             | ‚úÖ Oct 2023   | ‚ö†Ô∏è Approaching                 |
| **Passkeys**                  | ‚úÖ 108+ | ‚úÖ             | ‚úÖ iOS 16+    | ‚ö†Ô∏è Approaching                 |
| **CSP script-src-elem**       | ‚úÖ 79+  | ‚ö†Ô∏è In progress | ‚úÖ TP         | ‚ùå                             |
| **Speculation Rules**         | ‚úÖ 109+ | ‚ùå             | ‚ùå            | ‚ùå                             |
| **Priority Hints**            | ‚úÖ 102+ | ‚ùå             | ‚ùå            | ‚ùå                             |

## –ö–ª—é—á–µ–≤—ã–µ –≤—ã–≤–æ–¥—ã

### –û—Å–Ω–æ–≤–Ω—ã–µ —Ç—Ä–µ–Ω–¥—ã 2023 –≥–æ–¥–∞

1. **Privacy-first –ø–æ–¥—Ö–æ–¥**: Privacy Sandbox, CHIPS, –ø–∞—Ä—Ç–∏—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ cookies
2. **Passwordless authentication**: –º–∞—Å—Å–æ–≤–æ–µ –≤–Ω–µ–¥—Ä–µ–Ω–∏–µ WebAuthn Level 3 –∏ passkeys
3. **HTTP/3 adoption**: —Ä–æ—Å—Ç –¥–æ 40% —Ç—Ä–∞—Ñ–∏–∫–∞, –ø–æ–¥–¥–µ—Ä–∂–∫–∞ Firefox 114
4. **Deprecations**: —É–¥–∞–ª–µ–Ω–∏–µ `document.domain`, Web SQL –¥–ª—è –ø–æ–≤—ã—à–µ–Ω–∏—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏
5. **Cross-origin isolation**: —É–ª—É—á—à–µ–Ω–Ω–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞ COEP credentialless
6. **Network security**: Private Network Access –¥–ª—è –∑–∞—â–∏—Ç—ã –ª–æ–∫–∞–ª—å–Ω—ã—Ö —Å–µ—Ç–µ–π
7. **Baseline achievements**: Fetch Metadata, Import Maps, Modulepreload

### –¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏, –≥–æ—Ç–æ–≤—ã–µ –∫ production

**–ë–µ–∑–æ–ø–∞—Å–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å**:

- ‚úÖ HTTP/3 (40% —Ç—Ä–∞—Ñ–∏–∫–∞, —à–∏—Ä–æ–∫–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞)
- ‚úÖ Fetch Metadata headers (Baseline –º–∞—Ä—Ç 2023)
- ‚úÖ Import Maps (Baseline –º–∞—Ä—Ç 2023)
- ‚úÖ Modulepreload (Baseline —Å–µ–Ω—Ç—è–±—Ä—å 2023)
- ‚úÖ COEP/COOP/CORP –¥–ª—è cross-origin isolation
- ‚úÖ WebAuthn Conditional UI + Passkeys (approaching Baseline)
- ‚úÖ SameSite=Lax cookies (default –≤ Chrome/Firefox)

**–¢—Ä–µ–±—É—é—Ç progressive enhancement**:

- ‚ö†Ô∏è CHIPS ‚Äî —Ç–æ–ª—å–∫–æ Chrome (feature detection –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–∞)
- ‚ö†Ô∏è Privacy Sandbox APIs ‚Äî —Ç–æ–ª—å–∫–æ Chrome
- ‚ö†Ô∏è WebTransport ‚Äî Chrome –∏ Firefox, –Ω–æ –Ω–µ Safari
- ‚ö†Ô∏è Priority Hints ‚Äî —Ç–æ–ª—å–∫–æ Chrome/Edge
- ‚ö†Ô∏è Speculation Rules ‚Äî —Ç–æ–ª—å–∫–æ Chrome

**–ò–∑–±–µ–≥–∞—Ç—å**:

- ‚ùå `document.domain` (deprecated –≤ Chrome 115)
- ‚ùå Web SQL (removed –≤ Chrome 119)
- ‚ùå HTTP/2 Server Push (deprecated)

### –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ adoption

**Immediate Actions**:

1. **–í–Ω–µ–¥—Ä–∏—Ç—å Fetch Metadata –∑–∞—â–∏—Ç—É –Ω–∞ backend**:

```javascript
// Resource Isolation Policy
app.use((req, res, next) => {
    const site = req.headers['sec-fetch-site'];
    if (site === 'cross-site' && req.path.startsWith('/api/')) {
        return res.status(403).send('Forbidden');
    }
    next();
});
```

2. **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Import Maps –¥–ª—è module resolution**:

```html
<script type="importmap">
    {
        "imports": {
            "react": "https://cdn.skypack.dev/react@18",
            "lodash": "/node_modules/lodash-es/lodash.js"
        }
    }
</script>
```

3. **–î–æ–±–∞–≤–∏—Ç—å Modulepreload –¥–ª—è –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –º–æ–¥—É–ª–µ–π**:

```html
<link rel="modulepreload" href="/js/app.js" /> <link rel="modulepreload" href="/js/utils.js" />
```

4. **–ù–∞—Å—Ç—Ä–æ–∏—Ç—å COEP/COOP –¥–ª—è powerful features**:

```http
Cross-Origin-Embedder-Policy: credentialless
Cross-Origin-Opener-Policy: same-origin
```

5. **–í–Ω–µ–¥—Ä–∏—Ç—å WebAuthn + Passkeys –¥–ª—è passwordless auth**:

```javascript
const credential = await navigator.credentials.get({
    publicKey: {
        /* ... */
    },
    mediation: 'conditional',
});
```

**Plan for Future**:

1. **–ü–æ–¥–≥–æ—Ç–æ–≤–∏—Ç—å—Å—è –∫ third-party cookie deprecation** (2024)
    - –†–∞—Å—Å–º–æ—Ç—Ä–µ—Ç—å CHIPS –¥–ª—è cross-site cookies
    - –û—Ü–µ–Ω–∏—Ç—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ Privacy Sandbox APIs

2. **–ú–æ–Ω–∏—Ç–æ—Ä–∏—Ç—å WebTransport** –¥–ª—è real-time –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π
    - –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞ WebSocket —Å lower latency

3. **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å Private Network Access requirements**
    - –ï—Å–ª–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤—É–µ—Ç —Å –ª–æ–∫–∞–ª—å–Ω—ã–º–∏ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞–º–∏

4. **–°–ª–µ–¥–∏—Ç—å –∑–∞ Speculation Rules API**
    - –ó–Ω–∞—á–∏—Ç–µ–ª—å–Ω–æ–µ —É–ª—É—á—à–µ–Ω–∏–µ page load performance

**Security Best Practices**:

1. **CSP —Å script-src-elem/script-src-attr** (–∫–æ–≥–¥–∞ –¥–æ—Å—Ç–∏–≥–Ω–µ—Ç Baseline)
2. **Reporting API v1** –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ violations
3. **SameSite=Lax** –¥–ª—è –≤—Å–µ—Ö session cookies
4. **HTTPS-only** –¥–ª—è –≤—Å–µ—Ö production —Å–µ—Ä–≤–∏—Å–æ–≤
5. **Regular security audits** —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º Fetch Metadata

## –ò—Å—Ç–æ—á–Ω–∏–∫–∏

### –û—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã–µ Browser Sources

**Chrome**:

- Chrome Platform Status: https://chromestatus.com/
- Chrome Releases Blog: https://chromereleases.googleblog.com/2023/
- Chrome for Developers: https://developer.chrome.com/

**Firefox**:

- Firefox Release Notes: https://www.mozilla.org/en-US/firefox/releases/
- MDN Web Docs: https://developer.mozilla.org/
- Firefox for Developers: https://developer.mozilla.org/en-US/docs/Mozilla/Firefox/Releases

**Safari**:

- Safari Release Notes: https://developer.apple.com/documentation/safari-release-notes
- WebKit Blog: https://webkit.org/blog/
- Safari Technology Preview: https://developer.apple.com/safari/technology-preview/

### Standards Bodies

- WHATWG: https://whatwg.org/
- W3C: https://www.w3.org/
- IETF HTTP Working Group: https://httpwg.org/
- TC39 (JavaScript): https://tc39.es/

### Privacy Sandbox

- Privacy Sandbox: https://privacysandbox.google.com/
- Google for Developers Privacy Sandbox: https://developers.google.com/privacy-sandbox/
- CHIPS Documentation: https://developers.google.com/privacy-sandbox/3pcd/chips
- Feedback Reports Q1 2023:
  https://developers.google.com/privacy-sandbox/overview/feedback/report-2023-q1
- Feedback Reports Q2 2023:
  https://developers.google.com/privacy-sandbox/overview/feedback/report-2023-q2

### Security Specifications

- W3C Content Security Policy Level 3: https://www.w3.org/TR/CSP3/
- W3C Permissions Policy: https://www.w3.org/TR/permissions-policy/
- W3C WebAuthn Level 3: https://www.w3.org/TR/webauthn-3/
- W3C Secure Contexts: https://www.w3.org/TR/secure-contexts/
- W3C Fetch Metadata: https://www.w3.org/TR/fetch-metadata/

### Community Resources

- Can I Use: https://caniuse.com/
- web.dev Baseline: https://web.dev/baseline
- MDN Browser Compatibility Data: https://github.com/mdn/browser-compat-data
- web-platform-tests: https://github.com/web-platform-tests/wpt

### Technical Articles

- Fetch Metadata: https://web.dev/articles/fetch-metadata
- SameSite Cookies Explained: https://web.dev/articles/samesite-cookies-explained
- COOP and COEP: https://web.dev/articles/coop-coep
- WebTransport: https://web.dev/webtransport/
- Priority Hints: https://web.dev/fetch-priority/
- Import Maps: https://blog.logrocket.com/es-modules-in-browsers-with-import-maps/

### Cloudflare Research

- HTTP/3 Usage: https://blog.cloudflare.com/http3-usage-one-year-on/

- **–î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è –æ—Ç—á—ë—Ç–∞**: 18.11.2025
- **Research ID**: `frontend-baseline-2023-2025`
- **–ê–≤—Ç–æ—Ä**: DeepResearch Agent
- **–°–≤—è–∑–∞–Ω–Ω—ã–µ –æ—Ç—á—ë—Ç—ã**: [HTML 2023](./html.md), [CSS 2023](./css.md),
  [JavaScript 2023](./javascript.md)
